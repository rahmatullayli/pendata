
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Outlier Detection &#8212; Penambangan Data</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'DeteksiOutlier';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Local Outlier Factor" href="LOF.html" />
    <link rel="prev" title="Understanding Data" href="pemdatD_DataUnderstanding_23_185.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.jpg" class="logo__image only-light" alt="Penambangan Data - Home"/>
    <script>document.write(`<img src="_static/logo.jpg" class="logo__image only-dark" alt="Penambangan Data - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="pemdatD_DataUnderstanding_23_185.html">Understanding Data</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Outlier Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="LOF.html">Local Outlier Factor</a></li>
<li class="toctree-l1"><a class="reference internal" href="Naive_Bayes.html">Naive Bayes</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FDeteksiOutlier.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/DeteksiOutlier.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Outlier Detection</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#meningkatkan-kualitas-data">Meningkatkan Kualitas Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#memastikan-akurasi-analisis-statistik-dan-model">Memastikan Akurasi Analisis Statistik dan Model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mendeteksi-kejadian-langka-atau-anomali">Mendeteksi Kejadian Langka atau Anomali</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#meningkatkan-keamanan-dan-deteksi-ancaman">Meningkatkan Keamanan dan Deteksi Ancaman</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optimasi-proses-bisnis-dan-operasional">Optimasi Proses Bisnis dan Operasional</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mendukung-pengambilan-keputusan-berbasis-data">Mendukung Pengambilan Keputusan Berbasis Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#validasi-asumsi-data">Validasi Asumsi Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tahapan-mendeteksi-outlier">Tahapan mendeteksi outlier</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pemahaman-data">Pemahaman data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksplorasi-data">Eksplorasi Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#visualisasi-data">Visualisasi Data:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identifikasi-oulier-menggunakan-metode-knn">Identifikasi Oulier menggunakan metode KNN</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cara-kerja-knn-dalam-deteksi-outlier">Cara kerja KNN dalam deteksi Outlier</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="outlier-detection">
<h1>Outlier Detection<a class="headerlink" href="#outlier-detection" title="Link to this heading">#</a></h1>
<p>Outlier Detection salah satu proses dalam Understanding data untuk mengidentifikasi data atau observasi yang secara signifikan berbeda dari sebagian besar data dalam suatu dataset. Data ini disebut outlier atau anomali, dan sering kali merepresentasikan pola yang tidak biasa, kesalahan, atau kejadian langka yang penting untuk dianalisis. Tujuan Outlier Detection diantaranya adalah.</p>
<section id="meningkatkan-kualitas-data">
<h2>Meningkatkan Kualitas Data<a class="headerlink" href="#meningkatkan-kualitas-data" title="Link to this heading">#</a></h2>
<p>Membersihkan Data: Outlier sering muncul karena kesalahan input, noise, atau kesalahan teknis (misalnya, sensor rusak). Deteksi outlier membantu menghapus atau memperbaiki data yang tidak valid.</p>
<p>Memastikan Konsistensi: Menghilangkan gangguan dari data “kotor” sehingga analisis lebih akurat dan hasilnya lebih andal.</p>
</section>
<section id="memastikan-akurasi-analisis-statistik-dan-model">
<h2>Memastikan Akurasi Analisis Statistik dan Model<a class="headerlink" href="#memastikan-akurasi-analisis-statistik-dan-model" title="Link to this heading">#</a></h2>
<p>Mengurangi Bias: Outlier dapat memengaruhi nilai statistik seperti mean dan standar deviasi. Contoh: Satu data gaji miliaran dalam dataset karyawan akan membuat rata-rata gaji tidak realistis.</p>
<p>Meningkatkan Kinerja Model ML: Model machine learning (seperti regresi atau klasifikasi) bisa menjadi tidak stabil jika dilatih dengan data yang mengandung outlier.</p>
</section>
<section id="mendeteksi-kejadian-langka-atau-anomali">
<h2>Mendeteksi Kejadian Langka atau Anomali<a class="headerlink" href="#mendeteksi-kejadian-langka-atau-anomali" title="Link to this heading">#</a></h2>
<p>Identifikasi Fenomena Unik: Contoh:Transaksi penipuan di perbankan yang nilainya tidak biasa. Hasil medis abnormal (misalnya, kadar gula darah ekstrem).
Serangan siber (aktivitas jaringan yang tidak wajar).</p>
<p>Peringatan Dini: Outlier bisa menjadi sinyal untuk potensi risiko atau peluang, seperti kegagalan mesin di industri.</p>
</section>
<section id="meningkatkan-keamanan-dan-deteksi-ancaman">
<h2>Meningkatkan Keamanan dan Deteksi Ancaman<a class="headerlink" href="#meningkatkan-keamanan-dan-deteksi-ancaman" title="Link to this heading">#</a></h2>
<p>Deteksi Intrusi: Pada sistem keamanan TI, outlier bisa merepresentasikan upaya peretasan atau aktivitas mencurigakan.</p>
<p>Pencegahan Fraud: Memantau pola transaksi yang tidak biasa untuk mencegah penipuan.</p>
</section>
<section id="optimasi-proses-bisnis-dan-operasional">
<h2>Optimasi Proses Bisnis dan Operasional<a class="headerlink" href="#optimasi-proses-bisnis-dan-operasional" title="Link to this heading">#</a></h2>
<p>Quality Control: Di industri manufaktur, outlier bisa menunjukkan produk cacat atau kesalahan produksi.</p>
<p>Efisiensi Sumber Daya: Contoh: Analisis konsumsi energi yang tidak wajar untuk mengoptimalkan penggunaan listrik.</p>
</section>
<section id="mendukung-pengambilan-keputusan-berbasis-data">
<h2>Mendukung Pengambilan Keputusan Berbasis Data<a class="headerlink" href="#mendukung-pengambilan-keputusan-berbasis-data" title="Link to this heading">#</a></h2>
<p>Insight yang Relevan: Memisahkan “sinyal” (informasi penting) dari “noise” (data tidak relevan) agar keputusan bisnis atau strategis lebih tepat.</p>
<p>Analisis Tren: Memastikan tren yang teridentifikasi tidak terdistorsi oleh data ekstrem.</p>
</section>
<section id="validasi-asumsi-data">
<h2>Validasi Asumsi Data<a class="headerlink" href="#validasi-asumsi-data" title="Link to this heading">#</a></h2>
<p>Uji Distribusi Data: Outlier bisa mengindikasikan pelanggaran asumsi statistik (misalnya, data tidak berdistribusi normal).</p>
<p>Eksplorasi Data: Memahami batasan dataset dan apakah outlier perlu dipertahankan atau dihapus.</p>
<p>Setelah kita mengetahui tujuan dari outlier detection kita bisa melakukan tahapan berikiut untuk mengetahui outlier detection dari data Iris.</p>
</section>
<section id="tahapan-mendeteksi-outlier">
<h2>Tahapan mendeteksi outlier<a class="headerlink" href="#tahapan-mendeteksi-outlier" title="Link to this heading">#</a></h2>
<section id="pemahaman-data">
<h3>Pemahaman data<a class="headerlink" href="#pemahaman-data" title="Link to this heading">#</a></h3>
<p>Pada tahap awal untuk mengetahui nilai outlier pada suatu data terlebih dahulu kita harus memahami data tersebut, termasuk jumlah fitur, tipe data, distribusi, dan hubungan antar variabel. Identifikasi apakah dataset memiliki anomali alami atau error dalam pencatatan.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>pymysql
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>pandas<span class="w"> </span>tabulate
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting pymysql
  Downloading PyMySQL-1.1.1-py3-none-any.whl.metadata (4.4 kB)
Downloading PyMySQL-1.1.1-py3-none-any.whl (44 kB)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Installing collected packages: pymysql
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Successfully installed pymysql-1.1.1

<span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> A new release of pip is available: <span class=" -Color -Color-Red">25.0.1</span> -&gt; <span class=" -Color -Color-Green">25.1.1</span>
<span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> To update, run: <span class=" -Color -Color-Green">python3 -m pip install --upgrade pip</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pandas in /home/codespace/.local/lib/python3.12/site-packages (2.2.3)
Requirement already satisfied: tabulate in /usr/local/python/3.12.1/lib/python3.12/site-packages (0.9.0)
Requirement already satisfied: numpy&gt;=1.26.0 in /home/codespace/.local/lib/python3.12/site-packages (from pandas) (2.2.4)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /home/codespace/.local/lib/python3.12/site-packages (from pandas) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in /home/codespace/.local/lib/python3.12/site-packages (from pandas) (2025.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /home/codespace/.local/lib/python3.12/site-packages (from pandas) (2025.1)
Requirement already satisfied: six&gt;=1.5 in /home/codespace/.local/lib/python3.12/site-packages (from python-dateutil&gt;=2.8.2-&gt;pandas) (1.17.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> A new release of pip is available: <span class=" -Color -Color-Red">25.0.1</span> -&gt; <span class=" -Color -Color-Green">25.1.1</span>
<span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> To update, run: <span class=" -Color -Color-Green">python3 -m pip install --upgrade pip</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pymysql</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tabulate</span><span class="w"> </span><span class="kn">import</span> <span class="n">tabulate</span>

<span class="c1"># Koneksi ke database PostgreSQL</span>
<span class="n">PG_HOST</span> <span class="o">=</span> <span class="s2">&quot;pg-2e640ec9-rahmatullayli123-d892.h.aivencloud.com&quot;</span>
<span class="n">PG_PORT</span> <span class="o">=</span> <span class="s2">&quot;21028&quot;</span>
<span class="n">PG_NAME</span> <span class="o">=</span> <span class="s2">&quot;defaultdb&quot;</span>
<span class="n">PG_USER</span> <span class="o">=</span> <span class="s2">&quot;avnadmin&quot;</span>
<span class="n">PG_PASS</span> <span class="o">=</span> <span class="s2">&quot;AVNS_93PD-YH-4mlx5toeFU3&quot;</span>

<span class="c1"># Konfigurasi koneksi ke database MySQL</span>
<span class="n">DB_HOST</span> <span class="o">=</span> <span class="s2">&quot;mysql-309c3d6e-mysqlirispendata7.h.aivencloud.com&quot;</span>
<span class="n">DB_PORT</span> <span class="o">=</span> <span class="mi">26958</span>
<span class="n">DB_NAME</span> <span class="o">=</span> <span class="s2">&quot;iris_mysql&quot;</span>
<span class="n">DB_USER</span> <span class="o">=</span> <span class="s2">&quot;avnadmin&quot;</span>
<span class="n">DB_PASS</span> <span class="o">=</span> <span class="s2">&quot;AVNS_krNRWz9TOsAjruawhm3&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Koneksi PostgreSQL</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">PG_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">PG_PORT</span><span class="p">,</span> <span class="n">dbname</span><span class="o">=</span><span class="n">PG_NAME</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="n">PG_USER</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">PG_PASS</span><span class="p">,</span> <span class="n">sslmode</span><span class="o">=</span><span class="s2">&quot;require&quot;</span>
    <span class="p">)</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari PostgreSQL (ID, Class, Sepal Length, Sepal Width)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sepal;&quot;</span><span class="p">)</span>  <span class="c1"># Sesuaikan tabel</span>
    <span class="n">pg_rows</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">pg_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">pg_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pg_rows</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">pg_columns</span><span class="p">)</span>

    <span class="c1"># Koneksi MySQL</span>
    <span class="n">mysql_conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">DB_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">DB_PORT</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">DB_USER</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">DB_PASS</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">DB_NAME</span><span class="p">,</span>
        <span class="n">cursorclass</span><span class="o">=</span><span class="n">pymysql</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span>
    <span class="p">)</span>
    <span class="n">mysql_cur</span> <span class="o">=</span> <span class="n">mysql_conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari MySQL (ID, Petal Length, Petal Width)</span>
    <span class="n">mysql_cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM petal;&quot;</span><span class="p">)</span>  <span class="c1"># Sesuaikan tabel</span>
    <span class="n">mysql_rows</span> <span class="o">=</span> <span class="n">mysql_cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">mysql_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mysql_rows</span><span class="p">)</span>

    <span class="c1"># Menggabungkan kedua tabel berdasarkan ID</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pg_df</span><span class="p">,</span> <span class="n">mysql_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>  <span class="c1"># Inner join</span>

    <span class="c1"># Mengatur urutan kolom agar class berada di sebelah ID</span>
    <span class="n">ordered_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">]</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="p">[</span><span class="n">ordered_columns</span><span class="p">]</span>

    <span class="c1"># Mengurutkan data berdasarkan ID</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Menampilkan 3 data awal, tanda &quot;...&quot; di tengah, dan 3 data akhir</span>
    <span class="n">df_selected</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span>
        <span class="n">combined_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="s2">&quot;...&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">combined_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)],</span> <span class="n">columns</span><span class="o">=</span><span class="n">combined_df</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span>
        <span class="n">combined_df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
    <span class="p">])</span>
    <span class="c1"># Menampilkan hasil dalam format tabel</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tabulate</span><span class="p">(</span><span class="n">df_selected</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="s2">&quot;keys&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;psql&quot;</span><span class="p">,</span> <span class="n">showindex</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># Menutup koneksi</span>
    <span class="k">if</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">conn</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pymysql</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;psycopg2&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="eksplorasi-data">
<h3>Eksplorasi Data<a class="headerlink" href="#eksplorasi-data" title="Link to this heading">#</a></h3>
<p>Eksplorasi data (EDA) adalah proses memahami karakteristik dataset sebelum melakukan pemodelan lebih lanjut. Dalam EDA, kita melakukan descriptive statistics dan visualisasi data untuk menemukan pola, outlier, dan hubungan antar variabel.</p>
<section id="visualisasi-data">
<h4>Visualisasi Data:<a class="headerlink" href="#visualisasi-data" title="Link to this heading">#</a></h4>
<p>Boxplot → Menampilkan distribusi data &amp; potensi outlier.</p>
<p>Histogram → Melihat distribusi data.</p>
<p>Scatter Plot → Mengidentifikasi pola hubungan antar variabel.</p>
<p>####Descriptive Statistics:
Mean, median, standar deviasi, skewness, dan kurtosis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pymysql</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tabulate</span><span class="w"> </span><span class="kn">import</span> <span class="n">tabulate</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Koneksi PostgreSQL</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">PG_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">PG_PORT</span><span class="p">,</span> <span class="n">dbname</span><span class="o">=</span><span class="n">PG_NAME</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="n">PG_USER</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">PG_PASS</span><span class="p">,</span> <span class="n">sslmode</span><span class="o">=</span><span class="s2">&quot;require&quot;</span>
    <span class="p">)</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari PostgreSQL</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sepal;&quot;</span><span class="p">)</span>
    <span class="n">pg_rows</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">pg_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">pg_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pg_rows</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">pg_columns</span><span class="p">)</span>

    <span class="c1"># Koneksi MySQL</span>
    <span class="n">mysql_conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">DB_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">DB_PORT</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">DB_USER</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">DB_PASS</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">DB_NAME</span><span class="p">,</span>
        <span class="n">cursorclass</span><span class="o">=</span><span class="n">pymysql</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span>
    <span class="p">)</span>
    <span class="n">mysql_cur</span> <span class="o">=</span> <span class="n">mysql_conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari MySQL</span>
    <span class="n">mysql_cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM petal;&quot;</span><span class="p">)</span>
    <span class="n">mysql_rows</span> <span class="o">=</span> <span class="n">mysql_cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">mysql_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mysql_rows</span><span class="p">)</span>

    <span class="c1"># Menggabungkan kedua tabel berdasarkan ID</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pg_df</span><span class="p">,</span> <span class="n">mysql_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

    <span class="c1"># Mengatur urutan kolom</span>
    <span class="n">ordered_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">]</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="p">[</span><span class="n">ordered_columns</span><span class="p">]</span>

    <span class="c1"># Statistik Deskriptif</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Descriptive Statistics ===&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">combined_df</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>

    <span class="c1"># Visualisasi Data</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

    <span class="c1"># Histogram</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">],</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Histogram Distribusi Sepal Length&quot;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">],</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Histogram Distribusi Petal Length&quot;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1"># Boxplot untuk Outlier Detection</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">combined_df</span><span class="p">[[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">]])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Boxplot Fitur&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1"># Pairplot untuk Hubungan Antar Variabel</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">combined_df</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">diag_kind</span><span class="o">=</span><span class="s2">&quot;kde&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Pairplot untuk Hubungan Antar Variabel&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># Menutup koneksi</span>
    <span class="k">if</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">conn</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>=== Descriptive Statistics ===
               id  sepal_length  sepal_width  petal_length  petal_width
count  150.000000    150.000000   150.000000    150.000000    150.00000
mean    75.500000      5.943333     3.234000      4.285333      1.66400
std     43.445368      1.426895     2.282464      6.497593      5.66807
min      1.000000      4.300000     2.000000      1.000000      0.10000
25%     38.250000      5.100000     2.800000      1.600000      0.30000
50%     75.500000      5.800000     3.000000      4.400000      1.30000
75%    112.750000      6.400000     3.300000      5.100000      1.80000
max    150.000000     20.100000    30.500000     80.400000     70.00000
</pre></div>
</div>
<img alt="_images/90770e6acf51c56d48a6321c864675a73e30912e40e2adaf776b7a5c03ccba61.png" src="_images/90770e6acf51c56d48a6321c864675a73e30912e40e2adaf776b7a5c03ccba61.png" />
<img alt="_images/1157d96be49c7ada5bec5ec973ffa2bee4b9fab6f937c4d0436e2cab0915f5ef.png" src="_images/1157d96be49c7ada5bec5ec973ffa2bee4b9fab6f937c4d0436e2cab0915f5ef.png" />
<img alt="_images/63c91767a0b5571fdb999260d45629cba2a6c5e73820a46c0e40632fb19ca5cc.png" src="_images/63c91767a0b5571fdb999260d45629cba2a6c5e73820a46c0e40632fb19ca5cc.png" />
</div>
</div>
</section>
</section>
<section id="identifikasi-oulier-menggunakan-metode-knn">
<h3>Identifikasi Oulier menggunakan metode KNN<a class="headerlink" href="#identifikasi-oulier-menggunakan-metode-knn" title="Link to this heading">#</a></h3>
<p>K-Nearest Neighbors (KNN) adalah algoritma berbasis kedekatan (proximity-based) yang digunakan dalam klasifikasi, regresi, dan deteksi outlier. Dalam konteks outlier detection, KNN menghitung jarak antara setiap titik data dan k tetangga terdekatnya. Jika suatu titik jauh dari tetangga-tetangganya, maka titik tersebut dianggap sebagai outlier.</p>
<section id="cara-kerja-knn-dalam-deteksi-outlier">
<h4>Cara kerja KNN dalam deteksi Outlier<a class="headerlink" href="#cara-kerja-knn-dalam-deteksi-outlier" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p>Menghitung jarak</p></li>
</ol>
<p>Untuk setiap data dalam dataset, KNN menghitung jaraknya terhadap semua titik lain.
Umumnya menggunakan Euclidean Distance dengan menjumlahkan selisih dari setiap fitur antar titiknya:</p>
<p><span class="math notranslate nohighlight">\(d(A, B) = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}\)</span></p>
<p>Pada kasus ini, fitur yang digunakan:</p>
<ul class="simple">
<li><p>Sepal Length</p></li>
<li><p>Sepal Width</p></li>
<li><p>Petal Length</p></li>
<li><p>Petal Width</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p>Mencari k Tetangga Terdekat
Untuk setiap titik data,</p></li>
</ol>
<ul class="simple">
<li><p>cari k tetangga terdekat (misalnya k = 3).</p></li>
<li><p>Urutkan data berdasarkan distance dan ambil 3 tetangga terdekat.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pymysql</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tabulate</span><span class="w"> </span><span class="kn">import</span> <span class="n">tabulate</span>

<span class="c1"># Fungsi untuk menghitung Euclidean Distance</span>
<span class="k">def</span><span class="w"> </span><span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span>
    <span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Koneksi ke PostgreSQL</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">PG_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">PG_PORT</span><span class="p">,</span> <span class="n">dbname</span><span class="o">=</span><span class="n">PG_NAME</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="n">PG_USER</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">PG_PASS</span><span class="p">,</span> <span class="n">sslmode</span><span class="o">=</span><span class="s2">&quot;require&quot;</span>
    <span class="p">)</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari PostgreSQL</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sepal;&quot;</span><span class="p">)</span>
    <span class="n">pg_rows</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">pg_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">pg_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pg_rows</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">pg_columns</span><span class="p">)</span>

    <span class="c1"># Koneksi ke MySQL</span>
    <span class="n">mysql_conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">DB_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">DB_PORT</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">DB_USER</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">DB_PASS</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">DB_NAME</span><span class="p">,</span>
        <span class="n">cursorclass</span><span class="o">=</span><span class="n">pymysql</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span>
    <span class="p">)</span>
    <span class="n">mysql_cur</span> <span class="o">=</span> <span class="n">mysql_conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari MySQL</span>
    <span class="n">mysql_cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM petal ORDER BY id ASC;&quot;</span><span class="p">)</span>
    <span class="n">mysql_rows</span> <span class="o">=</span> <span class="n">mysql_cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">mysql_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mysql_rows</span><span class="p">)</span>

    <span class="c1"># Menggabungkan kedua tabel berdasarkan ID</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pg_df</span><span class="p">,</span> <span class="n">mysql_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

    <span class="c1"># Mengatur urutan kolom agar class berada di sebelah ID</span>
    <span class="n">ordered_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">]</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="p">[</span><span class="n">ordered_columns</span><span class="p">]</span>

    <span class="c1"># Menyimpan hasil tetangga terdekat</span>
    <span class="n">neighbor_1_id</span><span class="p">,</span> <span class="n">neighbor_1_dist</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="n">neighbor_2_id</span><span class="p">,</span> <span class="n">neighbor_2_dist</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="n">neighbor_3_id</span><span class="p">,</span> <span class="n">neighbor_3_dist</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>

    <span class="c1"># Menentukan tetangga terdekat untuk setiap data</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="c1"># Buat DataFrame baru untuk perhitungan jarak</span>
        <span class="n">temp_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">temp_df</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">euclidean_distance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">row</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Urutkan berdasarkan jarak dan ambil 3 tetangga terdekat (hindari diri sendiri)</span>
        <span class="n">neighbors</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;distance&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>  <span class="c1"># Skip indeks pertama karena itu dirinya sendiri</span>

        <span class="c1"># Simpan ID dan jarak tetangga</span>
        <span class="n">neighbor_1_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="n">neighbor_1_dist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span>
        <span class="n">neighbor_2_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="n">neighbor_2_dist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span>
        <span class="n">neighbor_3_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="n">neighbor_3_dist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span>

    <span class="c1"># Tambahkan kolom tetangga ke dataframe utama</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_1_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_1_id</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_1_dist&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_1_dist</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_2_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_2_id</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_2_dist&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_2_dist</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_3_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_3_id</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_3_dist&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_3_dist</span>

    <span class="c1"># 🔥 Urutkan berdasarkan jarak terdekat ke neighbor_1</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;neighbor_1_dist&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Menampilkan hasil dalam format tabel</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tabulate</span><span class="p">(</span><span class="n">combined_df</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="s2">&quot;keys&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;psql&quot;</span><span class="p">,</span> <span class="n">showindex</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># Menutup koneksi database</span>
    <span class="k">if</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">conn</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mysql_cur</span><span class="p">:</span>
        <span class="n">mysql_cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mysql_conn</span><span class="p">:</span>
        <span class="n">mysql_conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>+------+-----------------+----------------+---------------+----------------+---------------+-----------------+-------------------+-----------------+-------------------+-----------------+-------------------+
|   id | class           |   sepal_length |   sepal_width |   petal_length |   petal_width |   neighbor_1_id |   neighbor_1_dist |   neighbor_2_id |   neighbor_2_dist |   neighbor_3_id |   neighbor_3_dist |
|------+-----------------+----------------+---------------+----------------+---------------+-----------------+-------------------+-----------------+-------------------+-----------------+-------------------|
|   10 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |              35 |          0        |              38 |          0        |               2 |          0.173205 |
|   35 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |              35 |          0        |              38 |          0        |               2 |          0.173205 |
|   38 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |              35 |          0        |              38 |          0        |               2 |          0.173205 |
|  102 | Iris-virginica  |            5.8 |           2.7 |            5.1 |           1.9 |             143 |          0        |             114 |          0.264575 |             122 |          0.316228 |
|  143 | Iris-virginica  |            5.8 |           2.7 |            5.1 |           1.9 |             143 |          0        |             114 |          0.264575 |             122 |          0.316228 |
|   40 | Iris-setosa     |            5.1 |           3.4 |            1.5 |           0.2 |               8 |          0.1      |              29 |          0.141421 |              28 |          0.141421 |
|    8 | Iris-setosa     |            5   |           3.4 |            1.5 |           0.2 |              40 |          0.1      |              50 |          0.141421 |              18 |          0.2      |
|  129 | Iris-virginica  |            6.4 |           2.8 |            5.6 |           2.1 |             133 |          0.1      |             105 |          0.316228 |             104 |          0.331662 |
|  133 | Iris-virginica  |            6.4 |           2.8 |            5.6 |           2.2 |             129 |          0.1      |             105 |          0.3      |             104 |          0.424264 |
|   49 | Iris-setosa     |            5.3 |           3.7 |            1.5 |           0.2 |              11 |          0.1      |              28 |          0.223607 |              20 |          0.244949 |
|   11 | Iris-setosa     |            5.4 |           3.7 |            1.5 |           0.2 |              49 |          0.1      |              28 |          0.282843 |              37 |          0.3      |
|   18 | Iris-setosa     |            5.1 |           3.5 |            1.4 |           0.3 |              41 |          0.141421 |               5 |          0.173205 |              40 |          0.173205 |
|   41 | Iris-setosa     |            5   |           3.5 |            1.3 |           0.3 |              18 |          0.141421 |               5 |          0.173205 |               8 |          0.244949 |
|   20 | Iris-setosa     |            5.1 |           3.8 |            1.5 |           0.3 |              22 |          0.141421 |              47 |          0.141421 |              49 |          0.244949 |
|   22 | Iris-setosa     |            5.1 |           3.7 |            1.5 |           0.4 |              20 |          0.141421 |              47 |          0.244949 |              18 |          0.244949 |
|   30 | Iris-setosa     |            4.7 |           3.2 |            1.6 |           0.2 |              31 |          0.141421 |               4 |          0.173205 |              12 |          0.223607 |
|   82 | Iris-versicolor |            5.5 |           2.4 |            3.7 |           1   |              81 |          0.141421 |              70 |          0.264575 |              80 |          0.34641  |
|   81 | Iris-versicolor |            5.5 |           2.4 |            3.8 |           1.1 |              82 |          0.141421 |              70 |          0.173205 |              54 |          0.3      |
|  117 | Iris-virginica  |            6.5 |           3   |            5.5 |           1.8 |             138 |          0.141421 |             104 |          0.244949 |             148 |          0.360555 |
|   94 | Iris-versicolor |            5   |           2.3 |            3.3 |           1   |              58 |          0.141421 |              61 |          0.360555 |              99 |          0.387298 |
|   31 | Iris-setosa     |            4.8 |           3.1 |            1.6 |           0.2 |              30 |          0.141421 |              10 |          0.173205 |              35 |          0.173205 |
|  138 | Iris-virginica  |            6.4 |           3.1 |            5.5 |           1.8 |             117 |          0.141421 |             104 |          0.244949 |             148 |          0.387298 |
|   58 | Iris-versicolor |            4.9 |           2.4 |            3.3 |           1   |              94 |          0.141421 |              99 |          0.387298 |              61 |          0.458258 |
|    9 | Iris-setosa     |            4.4 |           2.9 |            1.4 |           0.2 |              39 |          0.141421 |               4 |          0.3      |              43 |          0.316228 |
|   39 | Iris-setosa     |            4.4 |           3   |            1.3 |           0.2 |               9 |          0.141421 |              43 |          0.2      |              14 |          0.244949 |
|   47 | Iris-setosa     |            5.1 |           3.8 |            1.6 |           0.2 |              20 |          0.141421 |              22 |          0.244949 |              49 |          0.244949 |
|   93 | Iris-versicolor |            5.8 |           2.6 |            4   |           1.2 |              83 |          0.141421 |              68 |          0.244949 |             100 |          0.264575 |
|   28 | Iris-setosa     |            5.2 |           3.5 |            1.5 |           0.2 |              29 |          0.141421 |              40 |          0.141421 |              18 |          0.173205 |
|   48 | Iris-setosa     |            4.6 |           3.2 |            1.4 |           0.2 |               4 |          0.141421 |               3 |          0.141421 |              43 |          0.223607 |
|   83 | Iris-versicolor |            5.8 |           2.7 |            3.9 |           1.2 |              93 |          0.141421 |             100 |          0.264575 |              68 |          0.282843 |
|   29 | Iris-setosa     |            5.2 |           3.4 |            1.4 |           0.2 |              28 |          0.141421 |              40 |          0.141421 |              18 |          0.173205 |
|    4 | Iris-setosa     |            4.6 |           3.1 |            1.5 |           0.2 |              48 |          0.141421 |              30 |          0.173205 |              31 |          0.223607 |
|   96 | Iris-versicolor |            5.7 |           3   |            4.2 |           1.2 |              97 |          0.141421 |              89 |          0.173205 |             100 |          0.244949 |
|   50 | Iris-setosa     |            5   |           3.3 |            1.4 |           0.2 |               8 |          0.141421 |              40 |          0.173205 |              36 |          0.223607 |
|   97 | Iris-versicolor |            5.7 |           2.9 |            4.2 |           1.3 |              96 |          0.141421 |             100 |          0.141421 |              89 |          0.173205 |
|  128 | Iris-virginica  |            6.1 |           3   |            4.9 |           1.8 |             139 |          0.141421 |             127 |          0.244949 |             150 |          0.282843 |
|  139 | Iris-virginica  |            6   |           3   |            4.8 |           1.8 |             128 |          0.141421 |              71 |          0.223607 |             127 |          0.282843 |
|    3 | Iris-setosa     |            4.7 |           3.2 |            1.3 |           0.2 |              48 |          0.141421 |               4 |          0.244949 |               7 |          0.264575 |
|    2 | Iris-setosa     |            4.9 |           3   |            1.4 |           0.2 |              46 |          0.141421 |              13 |          0.141421 |              10 |          0.173205 |
|   46 | Iris-setosa     |            4.8 |           3   |            1.4 |           0.3 |               2 |          0.141421 |              13 |          0.2      |              31 |          0.244949 |
|   13 | Iris-setosa     |            4.8 |           3   |            1.4 |           0.1 |               2 |          0.141421 |              10 |          0.173205 |              35 |          0.173205 |
|   66 | Iris-versicolor |            6.7 |           3.1 |            4.4 |           1.4 |              76 |          0.141421 |              59 |          0.316228 |              87 |          0.316228 |
|   92 | Iris-versicolor |            6.1 |           3   |            4.6 |           1.4 |              64 |          0.141421 |              79 |          0.2      |              74 |          0.3      |
|   76 | Iris-versicolor |            6.6 |           3   |            4.4 |           1.4 |              66 |          0.141421 |              59 |          0.244949 |              75 |          0.264575 |
|   64 | Iris-versicolor |            6.1 |           2.9 |            4.7 |           1.4 |              92 |          0.141421 |              74 |          0.223607 |              79 |          0.244949 |
|  100 | Iris-versicolor |            5.7 |           2.8 |            4.1 |           1.3 |              97 |          0.141421 |              95 |          0.173205 |              89 |          0.223607 |
|    5 | Iris-setosa     |            5   |           3.6 |            1.4 |           0.2 |              18 |          0.173205 |              41 |          0.173205 |               8 |          0.223607 |
|   70 | Iris-versicolor |            5.6 |           2.5 |            3.9 |           1.1 |              81 |          0.173205 |              90 |          0.244949 |              82 |          0.264575 |
|  127 | Iris-virginica  |            6.2 |           2.8 |            4.8 |           1.8 |             124 |          0.173205 |             128 |          0.244949 |             139 |          0.282843 |
|  124 | Iris-virginica  |            6.3 |           2.7 |            4.9 |           1.8 |             127 |          0.173205 |             147 |          0.244949 |             128 |          0.360555 |
|  113 | Iris-virginica  |            6.8 |           3   |            5.5 |           2.1 |             140 |          0.173205 |             141 |          0.34641  |             121 |          0.360555 |
|  140 | Iris-virginica  |            6.9 |           3.1 |            5.4 |           2.1 |             113 |          0.173205 |             146 |          0.360555 |             142 |          0.360555 |
|   95 | Iris-versicolor |            5.6 |           2.7 |            4.2 |           1.3 |             100 |          0.173205 |              97 |          0.223607 |              91 |          0.264575 |
|   89 | Iris-versicolor |            5.6 |           3   |            4.1 |           1.3 |              96 |          0.173205 |              97 |          0.173205 |             100 |          0.223607 |
|   85 | Iris-versicolor |            5.4 |           3   |            4.5 |           1.5 |              67 |          0.2      |              56 |          0.412311 |              97 |          0.479583 |
|   67 | Iris-versicolor |            5.6 |           3   |            4.5 |           1.5 |              85 |          0.2      |              56 |          0.3      |              97 |          0.387298 |
|   79 | Iris-versicolor |            6   |           2.9 |            4.5 |           1.5 |              92 |          0.2      |              64 |          0.244949 |              62 |          0.331662 |
|   27 | Iris-setosa     |            5   |           3.4 |            1.6 |           0.4 |              24 |          0.2      |              44 |          0.223607 |               8 |          0.223607 |
|   24 | Iris-setosa     |            5.1 |           3.3 |            1.7 |           0.5 |              27 |          0.2      |              44 |          0.264575 |              40 |          0.374166 |
|   26 | Iris-setosa     |            5   |           3   |            1.6 |           0.2 |              10 |          0.2      |              38 |          0.2      |              35 |          0.2      |
|   43 | Iris-setosa     |            4.4 |           3.2 |            1.3 |           0.2 |              39 |          0.2      |              48 |          0.223607 |               4 |          0.3      |
|   98 | Iris-versicolor |            6.2 |           2.9 |            4.3 |           1.3 |              75 |          0.2      |              72 |          0.331662 |              92 |          0.34641  |
|   75 | Iris-versicolor |            6.4 |           2.9 |            4.3 |           1.3 |              98 |          0.2      |              76 |          0.264575 |              59 |          0.360555 |
|   90 | Iris-versicolor |            5.5 |           2.5 |            4   |           1.3 |              54 |          0.2      |              70 |          0.244949 |              81 |          0.3      |
|   54 | Iris-versicolor |            5.5 |           2.3 |            4   |           1.3 |              90 |          0.2      |              81 |          0.3      |              70 |          0.316228 |
|   12 | Iris-setosa     |            4.8 |           3.4 |            1.6 |           0.2 |              30 |          0.223607 |               8 |          0.223607 |              27 |          0.282843 |
|    7 | Iris-setosa     |            4.6 |           3.4 |            1.4 |           0.3 |              48 |          0.223607 |               3 |          0.264575 |              12 |          0.3      |
|   36 | Iris-setosa     |            5   |           3.2 |            1.2 |           0.2 |              50 |          0.223607 |               2 |          0.3      |               3 |          0.316228 |
|   74 | Iris-versicolor |            6.1 |           2.8 |            4.7 |           1.2 |              64 |          0.223607 |              92 |          0.3      |              79 |          0.387298 |
|   71 | Iris-versicolor |            5.9 |           3.2 |            4.8 |           1.8 |             139 |          0.223607 |             128 |          0.3      |             150 |          0.360555 |
|   44 | Iris-setosa     |            5   |           3.5 |            1.6 |           0.6 |              27 |          0.223607 |              24 |          0.264575 |              22 |          0.316228 |
|  121 | Iris-virginica  |            6.9 |           3.2 |            5.7 |           2.3 |             144 |          0.223607 |             141 |          0.264575 |             125 |          0.3      |
|  144 | Iris-virginica  |            6.8 |           3.2 |            5.9 |           2.3 |             121 |          0.223607 |             125 |          0.316228 |             145 |          0.316228 |
|  148 | Iris-virginica  |            6.5 |           3   |            5.2 |           2   |             111 |          0.223607 |             112 |          0.34641  |             117 |          0.360555 |
|  111 | Iris-virginica  |            6.5 |           3.2 |            5.1 |           2   |             148 |          0.223607 |             116 |          0.374166 |              78 |          0.424264 |
|  137 | Iris-virginica  |            6.3 |           3.4 |            5.6 |           2.4 |             149 |          0.244949 |             116 |          0.387298 |             101 |          0.424264 |
|  149 | Iris-virginica  |            6.2 |           3.4 |            5.4 |           2.3 |             137 |          0.244949 |             116 |          0.3      |             111 |          0.556776 |
|   59 | Iris-versicolor |            6.6 |           2.9 |            4.6 |           1.3 |              76 |          0.244949 |              55 |          0.244949 |              66 |          0.316228 |
|   68 | Iris-versicolor |            5.8 |           2.7 |            4.1 |           1   |              93 |          0.244949 |              83 |          0.282843 |             100 |          0.331662 |
|   55 | Iris-versicolor |            6.5 |           2.8 |            4.6 |           1.5 |              59 |          0.244949 |              76 |          0.316228 |              77 |          0.374166 |
|  147 | Iris-virginica  |            6.3 |           2.5 |            5   |           1.9 |             124 |          0.244949 |             112 |          0.374166 |             127 |          0.387298 |
|  104 | Iris-virginica  |            6.3 |           2.9 |            5.6 |           1.8 |             117 |          0.244949 |             138 |          0.244949 |             129 |          0.331662 |
|  141 | Iris-virginica  |            6.7 |           3.1 |            5.6 |           2.4 |             145 |          0.244949 |             121 |          0.264575 |             113 |          0.34641  |
|  145 | Iris-virginica  |            6.7 |           3.3 |            5.7 |           2.5 |             141 |          0.244949 |             121 |          0.3      |             144 |          0.316228 |
|   14 | Iris-setosa     |            4.3 |           3   |            1.1 |           0.1 |              39 |          0.244949 |              43 |          0.316228 |               9 |          0.34641  |
|  146 | Iris-virginica  |            6.7 |           3   |            5.2 |           2.3 |             142 |          0.244949 |             148 |          0.360555 |             140 |          0.360555 |
|  142 | Iris-virginica  |            6.9 |           3.1 |            5.1 |           2.3 |             146 |          0.244949 |             140 |          0.360555 |             113 |          0.469042 |
|   69 | Iris-versicolor |            6.2 |           2.2 |            4.5 |           1.5 |              88 |          0.264575 |              73 |          0.509902 |             120 |          0.538516 |
|   88 | Iris-versicolor |            6.3 |           2.3 |            4.4 |           1.3 |              69 |          0.264575 |              73 |          0.574456 |              63 |          0.591608 |
|  114 | Iris-virginica  |            5.7 |           2.5 |            5   |           2   |             102 |          0.264575 |             143 |          0.264575 |             122 |          0.331662 |
|   91 | Iris-versicolor |            5.5 |           2.6 |            4.4 |           1.2 |              95 |          0.264575 |              56 |          0.316228 |              97 |          0.424264 |
|   53 | Iris-versicolor |            6.9 |           3.1 |            4.9 |           1.5 |              51 |          0.264575 |              87 |          0.282843 |              78 |          0.316228 |
|   51 | Iris-versicolor |            7   |           3.2 |            4.7 |           1.4 |              53 |          0.264575 |              87 |          0.331662 |              66 |          0.43589  |
|   52 | Iris-versicolor |            6.4 |           3.2 |            4.5 |           1.5 |              57 |          0.264575 |              76 |          0.316228 |              66 |          0.34641  |
|   57 | Iris-versicolor |            6.3 |           3.3 |            4.7 |           1.6 |              52 |          0.264575 |              86 |          0.374166 |              92 |          0.424264 |
|  108 | Iris-virginica  |            7.3 |           2.9 |            6.3 |           1.8 |             131 |          0.264575 |             126 |          0.43589  |             106 |          0.52915  |
|  131 | Iris-virginica  |            7.4 |           2.8 |            6.1 |           1.9 |             108 |          0.264575 |             103 |          0.458258 |             126 |          0.469042 |
|  123 | Iris-virginica  |            7.7 |           2.8 |            6.7 |           2   |             106 |          0.264575 |             119 |          0.412311 |             108 |          0.608276 |
|  106 | Iris-virginica  |            7.6 |           3   |            6.6 |           2.1 |             123 |          0.264575 |             108 |          0.52915  |             136 |          0.547723 |
|  150 | Iris-virginica  |            5.9 |           3   |            5.1 |           1.8 |             128 |          0.282843 |             139 |          0.316228 |             102 |          0.331662 |
|   32 | Iris-setosa     |            5.4 |           3.4 |            1.5 |           0.4 |              21 |          0.282843 |              28 |          0.3      |              29 |          0.3      |
|   21 | Iris-setosa     |            5.4 |           3.4 |            1.7 |           0.2 |              32 |          0.282843 |              28 |          0.3      |              29 |          0.360555 |
|   87 | Iris-versicolor |            6.7 |           3.1 |            4.7 |           1.5 |              53 |          0.282843 |              66 |          0.316228 |              59 |          0.316228 |
|   25 | Iris-setosa     |            4.8 |           3.4 |            1.9 |           0.2 |              12 |          0.3      |              30 |          0.374166 |              27 |          0.412311 |
|  125 | Iris-virginica  |            6.7 |           3.3 |            5.7 |           2.1 |             121 |          0.3      |             144 |          0.316228 |             113 |          0.374166 |
|   37 | Iris-setosa     |            5.5 |           3.5 |            1.3 |           0.2 |              11 |          0.3      |              32 |          0.316228 |              29 |          0.331662 |
|  116 | Iris-virginica  |            6.4 |           3.2 |            5.3 |           2.3 |             149 |          0.3      |             146 |          0.374166 |             111 |          0.374166 |
|   62 | Iris-versicolor |            5.9 |           3   |            4.2 |           1.5 |              97 |          0.3      |              79 |          0.331662 |              96 |          0.360555 |
|  105 | Iris-virginica  |            6.5 |           3   |            5.8 |           2.2 |             133 |          0.3      |             129 |          0.316228 |             141 |          0.360555 |
|   56 | Iris-versicolor |            5.7 |           2.8 |            4.5 |           1.3 |              67 |          0.3      |              91 |          0.316228 |              97 |          0.316228 |
|  122 | Iris-virginica  |            5.6 |           2.8 |            4.9 |           2   |             102 |          0.316228 |             143 |          0.316228 |             114 |          0.331662 |
|   78 | Iris-versicolor |            6.7 |           3   |            5   |           1.7 |              53 |          0.316228 |              87 |          0.374166 |             148 |          0.412311 |
|   77 | Iris-versicolor |            6.8 |           2.8 |            4.8 |           1.4 |              59 |          0.316228 |              87 |          0.34641  |              53 |          0.34641  |
|   84 | Iris-versicolor |            6   |           2.7 |            5.1 |           1.6 |             134 |          0.331662 |             143 |          0.360555 |             102 |          0.360555 |
|  134 | Iris-virginica  |            6.3 |           2.8 |            5.1 |           1.5 |              84 |          0.331662 |              73 |          0.360555 |             124 |          0.374166 |
|    6 | Iris-setosa     |            5.4 |           3.9 |            1.7 |           0.4 |              19 |          0.331662 |              11 |          0.34641  |              49 |          0.360555 |
|   19 | Iris-setosa     |            5.7 |           3.8 |            1.7 |           0.3 |               6 |          0.331662 |              11 |          0.387298 |              49 |          0.469042 |
|   72 | Iris-versicolor |            6.1 |           2.8 |            4   |           1.3 |              98 |          0.331662 |              83 |          0.34641  |              93 |          0.374166 |
|  112 | Iris-virginica  |            6.4 |           2.7 |            5.3 |           1.9 |             148 |          0.34641  |             129 |          0.374166 |             147 |          0.374166 |
|   17 | Iris-setosa     |            5.4 |           3.9 |            1.3 |           0.4 |              11 |          0.34641  |              49 |          0.360555 |              34 |          0.387298 |
|   33 | Iris-setosa     |            5.2 |           4.1 |            1.5 |           0.1 |              34 |          0.34641  |              47 |          0.34641  |              20 |          0.374166 |
|   34 | Iris-setosa     |            5.5 |           4.2 |            1.4 |           0.2 |              33 |          0.34641  |              16 |          0.360555 |              17 |          0.387298 |
|  130 | Iris-virginica  |            7.2 |           3   |            5.8 |           1.6 |             126 |          0.34641  |             131 |          0.509902 |             103 |          0.519615 |
|  126 | Iris-virginica  |            7.2 |           3.2 |            6   |           1.8 |             130 |          0.34641  |             103 |          0.387298 |             108 |          0.43589  |
|   80 | Iris-versicolor |            5.7 |           2.6 |            3.5 |           1   |              82 |          0.34641  |              81 |          0.424264 |              70 |          0.43589  |
|   73 | Iris-versicolor |            6.3 |           2.5 |            4.9 |           1.5 |             134 |          0.360555 |             124 |          0.360555 |             147 |          0.412311 |
|   45 | Iris-setosa     |            5.1 |           3.8 |            1.9 |           0.4 |              47 |          0.360555 |               6 |          0.374166 |              22 |          0.412311 |
|   61 | Iris-versicolor |            5   |           2   |            3.5 |           1   |              94 |          0.360555 |              58 |          0.458258 |              82 |          0.67082  |
|   16 | Iris-setosa     |            5.7 |           4.4 |            1.5 |           0.4 |              34 |          0.360555 |              15 |          0.547723 |               6 |          0.616441 |
|   86 | Iris-versicolor |            6   |           3.4 |            4.5 |           1.6 |              57 |          0.374166 |              71 |          0.424264 |              52 |          0.458258 |
|   99 | Iris-versicolor |            5.1 |           2.5 |            3   |           1.1 |              58 |          0.387298 |              94 |          0.387298 |              61 |          0.72111  |
|   60 | Iris-versicolor |            5.2 |           2.7 |            3.9 |           1.4 |              90 |          0.387298 |              95 |          0.509902 |              54 |          0.519615 |
|  103 | Iris-virginica  |            7.1 |           3   |            5.9 |           2.1 |             126 |          0.387298 |             121 |          0.4      |             144 |          0.412311 |
|  119 | Iris-virginica  |            7.7 |           2.6 |            6.9 |           2.3 |             123 |          0.412311 |             106 |          0.547723 |             136 |          0.894427 |
|   15 | Iris-setosa     |            5.8 |           4   |            1.2 |           0.2 |              34 |          0.412311 |              17 |          0.469042 |              16 |          0.547723 |
|  132 | Iris-virginica  |            7.9 |           3.8 |            6.4 |           2   |             118 |          0.412311 |             106 |          0.883176 |             136 |          0.927362 |
|  118 | Iris-virginica  |            7.7 |           3.8 |            6.7 |           2.2 |             132 |          0.412311 |             106 |          0.818535 |             110 |          0.860233 |
|   65 | Iris-versicolor |            5.6 |           2.9 |            3.6 |           1.3 |              83 |          0.424264 |              80 |          0.447214 |              89 |          0.509902 |
|  101 | Iris-virginica  |            6.3 |           3.3 |            6   |           2.5 |             137 |          0.424264 |             145 |          0.5      |             105 |          0.509902 |
|  120 | Iris-virginica  |            6   |           2.2 |            5   |           1.5 |              73 |          0.43589  |              84 |          0.519615 |              69 |          0.538516 |
|   23 | Iris-setosa     |            4.6 |           3.6 |            1   |           0.2 |               7 |          0.458258 |               3 |          0.509902 |              41 |          0.519615 |
|  115 | Iris-virginica  |            5.8 |           2.8 |            5.1 |           2.4 |             122 |          0.489898 |             102 |          0.509902 |             143 |          0.509902 |
|   63 | Iris-versicolor |            6   |           2.2 |            4   |           1   |              93 |          0.489898 |              70 |          0.519615 |              68 |          0.547723 |
|  136 | Iris-virginica  |            7.7 |           3   |            6.1 |           2.3 |             131 |          0.538516 |             106 |          0.547723 |             103 |          0.663325 |
|  135 | Iris-virginica  |            6.1 |           2.6 |            5.6 |           1.4 |             104 |          0.538516 |              84 |          0.556776 |             134 |          0.583095 |
|  109 | Iris-virginica  |            6.7 |           2.5 |            5.8 |           1.8 |             129 |          0.556776 |             104 |          0.6      |             117 |          0.616441 |
|   42 | Iris-setosa     |            4.5 |           2.3 |            1.3 |           0.3 |               9 |          0.6245   |              39 |          0.714143 |              46 |          0.768115 |
|  110 | Iris-virginica  |            7.2 |           3.6 |            6.1 |           2.5 |             144 |          0.632456 |             121 |          0.67082  |             145 |          0.707107 |
|  107 | Iris-virginica  |            4.9 |           2.5 |            4.5 |           1.7 |              85 |          0.734847 |              60 |          0.761577 |              91 |          0.793725 |
|    1 | Iris-setosa     |           20.1 |          30.5 |           80.4 |          70   |             118 |        104.38     |             119 |        104.488    |             132 |        104.698    |
+------+-----------------+----------------+---------------+----------------+---------------+-----------------+-------------------+-----------------+-------------------+-----------------+-------------------+
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="3">
<li><p>Menghitung Rata-rata Jarak ke k Tetangga Terdekat
Untuk setiap titik</p></li>
</ol>
<ul class="simple">
<li><p>hitung rata-rata jarak ke 3 tetangga terdekat:</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(
R = \frac{d_1 + d_2 + d_3}{3}
\)</span></p>
<ul class="simple">
<li><p>Semakin besar nilai rata-rata distance, semakin besar kemungkinan titik tersebut adalah outlier.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pymysql</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tabulate</span><span class="w"> </span><span class="kn">import</span> <span class="n">tabulate</span>

<span class="c1"># Fungsi untuk menghitung Euclidean Distance</span>
<span class="k">def</span><span class="w"> </span><span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span>
    <span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Koneksi ke PostgreSQL</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">PG_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">PG_PORT</span><span class="p">,</span> <span class="n">dbname</span><span class="o">=</span><span class="n">PG_NAME</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="n">PG_USER</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">PG_PASS</span><span class="p">,</span> <span class="n">sslmode</span><span class="o">=</span><span class="s2">&quot;require&quot;</span>
    <span class="p">)</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari PostgreSQL</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sepal;&quot;</span><span class="p">)</span>
    <span class="n">pg_rows</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">pg_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">pg_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pg_rows</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">pg_columns</span><span class="p">)</span>

    <span class="c1"># Koneksi ke MySQL</span>
    <span class="n">mysql_conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">DB_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">DB_PORT</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">DB_USER</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">DB_PASS</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">DB_NAME</span><span class="p">,</span>
        <span class="n">cursorclass</span><span class="o">=</span><span class="n">pymysql</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span>
    <span class="p">)</span>
    <span class="n">mysql_cur</span> <span class="o">=</span> <span class="n">mysql_conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari MySQL</span>
    <span class="n">mysql_cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM petal ORDER BY id ASC;&quot;</span><span class="p">)</span>
    <span class="n">mysql_rows</span> <span class="o">=</span> <span class="n">mysql_cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">mysql_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mysql_rows</span><span class="p">)</span>

    <span class="c1"># Menggabungkan kedua tabel berdasarkan ID</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pg_df</span><span class="p">,</span> <span class="n">mysql_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

    <span class="c1"># Mengatur urutan kolom agar class berada di sebelah ID</span>
    <span class="n">ordered_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">]</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="p">[</span><span class="n">ordered_columns</span><span class="p">]</span>

    <span class="c1"># Menyimpan hasil tetangga terdekat</span>
    <span class="n">neighbor_1_id</span><span class="p">,</span> <span class="n">neighbor_1_dist</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="n">neighbor_2_id</span><span class="p">,</span> <span class="n">neighbor_2_dist</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="n">neighbor_3_id</span><span class="p">,</span> <span class="n">neighbor_3_dist</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="n">avg_distances</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Menentukan tetangga terdekat untuk setiap data</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="c1"># Buat DataFrame baru untuk perhitungan jarak</span>
        <span class="n">temp_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">temp_df</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">euclidean_distance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">row</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Urutkan berdasarkan jarak dan ambil 3 tetangga terdekat (hindari diri sendiri)</span>
        <span class="n">neighbors</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;distance&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>  <span class="c1"># Skip indeks pertama karena itu dirinya sendiri</span>

        <span class="c1"># Simpan ID dan jarak tetangga</span>
        <span class="n">neighbor_1_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="n">neighbor_1_dist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span>
        <span class="n">neighbor_2_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="n">neighbor_2_dist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span>
        <span class="n">neighbor_3_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="n">neighbor_3_dist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span>

        <span class="c1"># Hitung rata-rata distance</span>
        <span class="n">avg_distance</span> <span class="o">=</span> <span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span> <span class="o">/</span> <span class="mi">3</span>
        <span class="n">avg_distances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">avg_distance</span><span class="p">)</span>

    <span class="c1"># Tambahkan kolom tetangga ke dataframe utama</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_1_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_1_id</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_1_dist&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_1_dist</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_2_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_2_id</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_2_dist&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_2_dist</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_3_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_3_id</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;neighbor_3_dist&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_3_dist</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;avg_distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">avg_distances</span>  <span class="c1"># 🔥 Kolom baru untuk rata-rata distance</span>

    <span class="c1"># 🔥 Urutkan berdasarkan rata-rata jarak ke tetangga terdekat</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;avg_distance&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Menampilkan hasil dalam format tabel</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tabulate</span><span class="p">(</span><span class="n">combined_df</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="s2">&quot;keys&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;psql&quot;</span><span class="p">,</span> <span class="n">showindex</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># Menutup koneksi database</span>
    <span class="k">if</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">conn</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mysql_cur</span><span class="p">:</span>
        <span class="n">mysql_cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mysql_conn</span><span class="p">:</span>
        <span class="n">mysql_conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>+------+-----------------+----------------+---------------+----------------+---------------+-----------------+-------------------+-----------------+-------------------+-----------------+-------------------+----------------+
|   id | class           |   sepal_length |   sepal_width |   petal_length |   petal_width |   neighbor_1_id |   neighbor_1_dist |   neighbor_2_id |   neighbor_2_dist |   neighbor_3_id |   neighbor_3_dist |   avg_distance |
|------+-----------------+----------------+---------------+----------------+---------------+-----------------+-------------------+-----------------+-------------------+-----------------+-------------------+----------------|
|   10 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |              35 |          0        |              38 |          0        |               2 |          0.173205 |       0.057735 |
|   35 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |              35 |          0        |              38 |          0        |               2 |          0.173205 |       0.057735 |
|   38 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |              35 |          0        |              38 |          0        |               2 |          0.173205 |       0.057735 |
|   40 | Iris-setosa     |            5.1 |           3.4 |            1.5 |           0.2 |               8 |          0.1      |              29 |          0.141421 |              28 |          0.141421 |       0.127614 |
|    8 | Iris-setosa     |            5   |           3.4 |            1.5 |           0.2 |              40 |          0.1      |              50 |          0.141421 |              18 |          0.2      |       0.14714  |
|   29 | Iris-setosa     |            5.2 |           3.4 |            1.4 |           0.2 |              28 |          0.141421 |              40 |          0.141421 |              18 |          0.173205 |       0.152016 |
|    2 | Iris-setosa     |            4.9 |           3   |            1.4 |           0.2 |              46 |          0.141421 |              13 |          0.141421 |              10 |          0.173205 |       0.152016 |
|   28 | Iris-setosa     |            5.2 |           3.5 |            1.5 |           0.2 |              29 |          0.141421 |              40 |          0.141421 |              18 |          0.173205 |       0.152016 |
|   97 | Iris-versicolor |            5.7 |           2.9 |            4.2 |           1.3 |              96 |          0.141421 |             100 |          0.141421 |              89 |          0.173205 |       0.152016 |
|   18 | Iris-setosa     |            5.1 |           3.5 |            1.4 |           0.3 |              41 |          0.141421 |               5 |          0.173205 |              40 |          0.173205 |       0.162611 |
|   31 | Iris-setosa     |            4.8 |           3.1 |            1.6 |           0.2 |              30 |          0.141421 |              10 |          0.173205 |              35 |          0.173205 |       0.162611 |
|   13 | Iris-setosa     |            4.8 |           3   |            1.4 |           0.1 |               2 |          0.141421 |              10 |          0.173205 |              35 |          0.173205 |       0.162611 |
|   48 | Iris-setosa     |            4.6 |           3.2 |            1.4 |           0.2 |               4 |          0.141421 |               3 |          0.141421 |              43 |          0.223607 |       0.168817 |
|   20 | Iris-setosa     |            5.1 |           3.8 |            1.5 |           0.3 |              22 |          0.141421 |              47 |          0.141421 |              49 |          0.244949 |       0.175931 |
|   50 | Iris-setosa     |            5   |           3.3 |            1.4 |           0.2 |               8 |          0.141421 |              40 |          0.173205 |              36 |          0.223607 |       0.179411 |
|   30 | Iris-setosa     |            4.7 |           3.2 |            1.6 |           0.2 |              31 |          0.141421 |               4 |          0.173205 |              12 |          0.223607 |       0.179411 |
|    4 | Iris-setosa     |            4.6 |           3.1 |            1.5 |           0.2 |              48 |          0.141421 |              30 |          0.173205 |              31 |          0.223607 |       0.179411 |
|  100 | Iris-versicolor |            5.7 |           2.8 |            4.1 |           1.3 |              97 |          0.141421 |              95 |          0.173205 |              89 |          0.223607 |       0.179411 |
|   41 | Iris-setosa     |            5   |           3.5 |            1.3 |           0.3 |              18 |          0.141421 |               5 |          0.173205 |               8 |          0.244949 |       0.186525 |
|   96 | Iris-versicolor |            5.7 |           3   |            4.2 |           1.2 |              97 |          0.141421 |              89 |          0.173205 |             100 |          0.244949 |       0.186525 |
|   49 | Iris-setosa     |            5.3 |           3.7 |            1.5 |           0.2 |              11 |          0.1      |              28 |          0.223607 |              20 |          0.244949 |       0.189519 |
|    5 | Iris-setosa     |            5   |           3.6 |            1.4 |           0.2 |              18 |          0.173205 |              41 |          0.173205 |               8 |          0.223607 |       0.190006 |
|   89 | Iris-versicolor |            5.6 |           3   |            4.1 |           1.3 |              96 |          0.173205 |              97 |          0.173205 |             100 |          0.223607 |       0.190006 |
|  102 | Iris-virginica  |            5.8 |           2.7 |            5.1 |           1.9 |             143 |          0        |             114 |          0.264575 |             122 |          0.316228 |       0.193601 |
|  143 | Iris-virginica  |            5.8 |           2.7 |            5.1 |           1.9 |             143 |          0        |             114 |          0.264575 |             122 |          0.316228 |       0.193601 |
|   39 | Iris-setosa     |            4.4 |           3   |            1.3 |           0.2 |               9 |          0.141421 |              43 |          0.2      |              14 |          0.244949 |       0.195457 |
|   46 | Iris-setosa     |            4.8 |           3   |            1.4 |           0.3 |               2 |          0.141421 |              13 |          0.2      |              31 |          0.244949 |       0.195457 |
|   26 | Iris-setosa     |            5   |           3   |            1.6 |           0.2 |              10 |          0.2      |              38 |          0.2      |              35 |          0.2      |       0.2      |
|   64 | Iris-versicolor |            6.1 |           2.9 |            4.7 |           1.4 |              92 |          0.141421 |              74 |          0.223607 |              79 |          0.244949 |       0.203326 |
|   81 | Iris-versicolor |            5.5 |           2.4 |            3.8 |           1.1 |              82 |          0.141421 |              70 |          0.173205 |              54 |          0.3      |       0.204875 |
|   22 | Iris-setosa     |            5.1 |           3.7 |            1.5 |           0.4 |              20 |          0.141421 |              47 |          0.244949 |              18 |          0.244949 |       0.21044  |
|   47 | Iris-setosa     |            5.1 |           3.8 |            1.6 |           0.2 |              20 |          0.141421 |              22 |          0.244949 |              49 |          0.244949 |       0.21044  |
|   92 | Iris-versicolor |            6.1 |           3   |            4.6 |           1.4 |              64 |          0.141421 |              79 |          0.2      |              74 |          0.3      |       0.213807 |
|   27 | Iris-setosa     |            5   |           3.4 |            1.6 |           0.4 |              24 |          0.2      |              44 |          0.223607 |               8 |          0.223607 |       0.215738 |
|  139 | Iris-virginica  |            6   |           3   |            4.8 |           1.8 |             128 |          0.141421 |              71 |          0.223607 |             127 |          0.282843 |       0.215957 |
|   76 | Iris-versicolor |            6.6 |           3   |            4.4 |           1.4 |              66 |          0.141421 |              59 |          0.244949 |              75 |          0.264575 |       0.216982 |
|   93 | Iris-versicolor |            5.8 |           2.6 |            4   |           1.2 |              83 |          0.141421 |              68 |          0.244949 |             100 |          0.264575 |       0.216982 |
|    3 | Iris-setosa     |            4.7 |           3.2 |            1.3 |           0.2 |              48 |          0.141421 |               4 |          0.244949 |               7 |          0.264575 |       0.216982 |
|   95 | Iris-versicolor |            5.6 |           2.7 |            4.2 |           1.3 |             100 |          0.173205 |              97 |          0.223607 |              91 |          0.264575 |       0.220462 |
|  128 | Iris-virginica  |            6.1 |           3   |            4.9 |           1.8 |             139 |          0.141421 |             127 |          0.244949 |             150 |          0.282843 |       0.223071 |
|   70 | Iris-versicolor |            5.6 |           2.5 |            3.9 |           1.1 |              81 |          0.173205 |              90 |          0.244949 |              82 |          0.264575 |       0.227576 |
|   11 | Iris-setosa     |            5.4 |           3.7 |            1.5 |           0.2 |              49 |          0.1      |              28 |          0.282843 |              37 |          0.3      |       0.227614 |
|   83 | Iris-versicolor |            5.8 |           2.7 |            3.9 |           1.2 |              93 |          0.141421 |             100 |          0.264575 |              68 |          0.282843 |       0.229613 |
|  127 | Iris-virginica  |            6.2 |           2.8 |            4.8 |           1.8 |             124 |          0.173205 |             128 |          0.244949 |             139 |          0.282843 |       0.233666 |
|   43 | Iris-setosa     |            4.4 |           3.2 |            1.3 |           0.2 |              39 |          0.2      |              48 |          0.223607 |               4 |          0.3      |       0.241202 |
|   12 | Iris-setosa     |            4.8 |           3.4 |            1.6 |           0.2 |              30 |          0.223607 |               8 |          0.223607 |              27 |          0.282843 |       0.243352 |
|   90 | Iris-versicolor |            5.5 |           2.5 |            4   |           1.3 |              54 |          0.2      |              70 |          0.244949 |              81 |          0.3      |       0.248316 |
|  117 | Iris-virginica  |            6.5 |           3   |            5.5 |           1.8 |             138 |          0.141421 |             104 |          0.244949 |             148 |          0.360555 |       0.248975 |
|  129 | Iris-virginica  |            6.4 |           2.8 |            5.6 |           2.1 |             133 |          0.1      |             105 |          0.316228 |             104 |          0.331662 |       0.249297 |
|   82 | Iris-versicolor |            5.5 |           2.4 |            3.7 |           1   |              81 |          0.141421 |              70 |          0.264575 |              80 |          0.34641  |       0.250802 |
|    9 | Iris-setosa     |            4.4 |           2.9 |            1.4 |           0.2 |              39 |          0.141421 |               4 |          0.3      |              43 |          0.316228 |       0.25255  |
|  138 | Iris-virginica  |            6.4 |           3.1 |            5.5 |           1.8 |             117 |          0.141421 |             104 |          0.244949 |             148 |          0.387298 |       0.25789  |
|   66 | Iris-versicolor |            6.7 |           3.1 |            4.4 |           1.4 |              76 |          0.141421 |              59 |          0.316228 |              87 |          0.316228 |       0.257959 |
|   79 | Iris-versicolor |            6   |           2.9 |            4.5 |           1.5 |              92 |          0.2      |              64 |          0.244949 |              62 |          0.331662 |       0.25887  |
|  124 | Iris-virginica  |            6.3 |           2.7 |            4.9 |           1.8 |             127 |          0.173205 |             147 |          0.244949 |             128 |          0.360555 |       0.25957  |
|    7 | Iris-setosa     |            4.6 |           3.4 |            1.4 |           0.3 |              48 |          0.223607 |               3 |          0.264575 |              12 |          0.3      |       0.262727 |
|  121 | Iris-virginica  |            6.9 |           3.2 |            5.7 |           2.3 |             144 |          0.223607 |             141 |          0.264575 |             125 |          0.3      |       0.262727 |
|   44 | Iris-setosa     |            5   |           3.5 |            1.6 |           0.6 |              27 |          0.223607 |              24 |          0.264575 |              22 |          0.316228 |       0.268137 |
|   59 | Iris-versicolor |            6.6 |           2.9 |            4.6 |           1.3 |              76 |          0.244949 |              55 |          0.244949 |              66 |          0.316228 |       0.268709 |
|   54 | Iris-versicolor |            5.5 |           2.3 |            4   |           1.3 |              90 |          0.2      |              81 |          0.3      |              70 |          0.316228 |       0.272076 |
|  104 | Iris-virginica  |            6.3 |           2.9 |            5.6 |           1.8 |             117 |          0.244949 |             138 |          0.244949 |             129 |          0.331662 |       0.273853 |
|  133 | Iris-virginica  |            6.4 |           2.8 |            5.6 |           2.2 |             129 |          0.1      |             105 |          0.3      |             104 |          0.424264 |       0.274755 |
|   75 | Iris-versicolor |            6.4 |           2.9 |            4.3 |           1.3 |              98 |          0.2      |              76 |          0.264575 |              59 |          0.360555 |       0.275043 |
|   24 | Iris-setosa     |            5.1 |           3.3 |            1.7 |           0.5 |              27 |          0.2      |              44 |          0.264575 |              40 |          0.374166 |       0.27958  |
|   36 | Iris-setosa     |            5   |           3.2 |            1.2 |           0.2 |              50 |          0.223607 |               2 |          0.3      |               3 |          0.316228 |       0.279945 |
|  141 | Iris-virginica  |            6.7 |           3.1 |            5.6 |           2.4 |             145 |          0.244949 |             121 |          0.264575 |             113 |          0.34641  |       0.285311 |
|  144 | Iris-virginica  |            6.8 |           3.2 |            5.9 |           2.3 |             121 |          0.223607 |             125 |          0.316228 |             145 |          0.316228 |       0.285354 |
|   68 | Iris-versicolor |            5.8 |           2.7 |            4.1 |           1   |              93 |          0.244949 |              83 |          0.282843 |             100 |          0.331662 |       0.286485 |
|  114 | Iris-virginica  |            5.7 |           2.5 |            5   |           2   |             102 |          0.264575 |             143 |          0.264575 |             122 |          0.331662 |       0.286938 |
|  145 | Iris-virginica  |            6.7 |           3.3 |            5.7 |           2.5 |             141 |          0.244949 |             121 |          0.3      |             144 |          0.316228 |       0.287059 |
|   53 | Iris-versicolor |            6.9 |           3.1 |            4.9 |           1.5 |              51 |          0.264575 |              87 |          0.282843 |              78 |          0.316228 |       0.287882 |
|   98 | Iris-versicolor |            6.2 |           2.9 |            4.3 |           1.3 |              75 |          0.2      |              72 |          0.331662 |              92 |          0.34641  |       0.292691 |
|  113 | Iris-virginica  |            6.8 |           3   |            5.5 |           2.1 |             140 |          0.173205 |             141 |          0.34641  |             121 |          0.360555 |       0.29339  |
|   32 | Iris-setosa     |            5.4 |           3.4 |            1.5 |           0.4 |              21 |          0.282843 |              28 |          0.3      |              29 |          0.3      |       0.294281 |
|   71 | Iris-versicolor |            5.9 |           3.2 |            4.8 |           1.8 |             139 |          0.223607 |             128 |          0.3      |             150 |          0.360555 |       0.294721 |
|   67 | Iris-versicolor |            5.6 |           3   |            4.5 |           1.5 |              85 |          0.2      |              56 |          0.3      |              97 |          0.387298 |       0.295766 |
|   94 | Iris-versicolor |            5   |           2.3 |            3.3 |           1   |              58 |          0.141421 |              61 |          0.360555 |              99 |          0.387298 |       0.296425 |
|  140 | Iris-virginica  |            6.9 |           3.1 |            5.4 |           2.1 |             113 |          0.173205 |             146 |          0.360555 |             142 |          0.360555 |       0.298105 |
|   14 | Iris-setosa     |            4.3 |           3   |            1.1 |           0.1 |              39 |          0.244949 |              43 |          0.316228 |               9 |          0.34641  |       0.302529 |
|   74 | Iris-versicolor |            6.1 |           2.8 |            4.7 |           1.2 |              64 |          0.223607 |              92 |          0.3      |              79 |          0.387298 |       0.303635 |
|   87 | Iris-versicolor |            6.7 |           3.1 |            4.7 |           1.5 |              53 |          0.282843 |              66 |          0.316228 |              59 |          0.316228 |       0.305099 |
|   52 | Iris-versicolor |            6.4 |           3.2 |            4.5 |           1.5 |              57 |          0.264575 |              76 |          0.316228 |              66 |          0.34641  |       0.309071 |
|  148 | Iris-virginica  |            6.5 |           3   |            5.2 |           2   |             111 |          0.223607 |             112 |          0.34641  |             117 |          0.360555 |       0.310191 |
|  150 | Iris-virginica  |            5.9 |           3   |            5.1 |           1.8 |             128 |          0.282843 |             139 |          0.316228 |             102 |          0.331662 |       0.310244 |
|   56 | Iris-versicolor |            5.7 |           2.8 |            4.5 |           1.3 |              67 |          0.3      |              91 |          0.316228 |              97 |          0.316228 |       0.310819 |
|   55 | Iris-versicolor |            6.5 |           2.8 |            4.6 |           1.5 |              59 |          0.244949 |              76 |          0.316228 |              77 |          0.374166 |       0.311781 |
|   21 | Iris-setosa     |            5.4 |           3.4 |            1.7 |           0.2 |              32 |          0.282843 |              28 |          0.3      |              29 |          0.360555 |       0.314466 |
|   37 | Iris-setosa     |            5.5 |           3.5 |            1.3 |           0.2 |              11 |          0.3      |              32 |          0.316228 |              29 |          0.331662 |       0.315963 |
|  122 | Iris-virginica  |            5.6 |           2.8 |            4.9 |           2   |             102 |          0.316228 |             143 |          0.316228 |             114 |          0.331662 |       0.321373 |
|  146 | Iris-virginica  |            6.7 |           3   |            5.2 |           2.3 |             142 |          0.244949 |             148 |          0.360555 |             140 |          0.360555 |       0.32202  |
|  105 | Iris-virginica  |            6.5 |           3   |            5.8 |           2.2 |             133 |          0.3      |             129 |          0.316228 |             141 |          0.360555 |       0.325594 |
|   58 | Iris-versicolor |            4.9 |           2.4 |            3.3 |           1   |              94 |          0.141421 |              99 |          0.387298 |              61 |          0.458258 |       0.328992 |
|  125 | Iris-virginica  |            6.7 |           3.3 |            5.7 |           2.1 |             121 |          0.3      |             144 |          0.316228 |             113 |          0.374166 |       0.330131 |
|   62 | Iris-versicolor |            5.9 |           3   |            4.2 |           1.5 |              97 |          0.3      |              79 |          0.331662 |              96 |          0.360555 |       0.330739 |
|   91 | Iris-versicolor |            5.5 |           2.6 |            4.4 |           1.2 |              95 |          0.264575 |              56 |          0.316228 |              97 |          0.424264 |       0.335022 |
|  147 | Iris-virginica  |            6.3 |           2.5 |            5   |           1.9 |             124 |          0.244949 |             112 |          0.374166 |             127 |          0.387298 |       0.335471 |
|   77 | Iris-versicolor |            6.8 |           2.8 |            4.8 |           1.4 |              59 |          0.316228 |              87 |          0.34641  |              53 |          0.34641  |       0.336349 |
|  111 | Iris-virginica  |            6.5 |           3.2 |            5.1 |           2   |             148 |          0.223607 |             116 |          0.374166 |              78 |          0.424264 |       0.340679 |
|   51 | Iris-versicolor |            7   |           3.2 |            4.7 |           1.4 |              53 |          0.264575 |              87 |          0.331662 |              66 |          0.43589  |       0.344043 |
|    6 | Iris-setosa     |            5.4 |           3.9 |            1.7 |           0.4 |              19 |          0.331662 |              11 |          0.34641  |              49 |          0.360555 |       0.346209 |
|  116 | Iris-virginica  |            6.4 |           3.2 |            5.3 |           2.3 |             149 |          0.3      |             146 |          0.374166 |             111 |          0.374166 |       0.349444 |
|   72 | Iris-versicolor |            6.1 |           2.8 |            4   |           1.3 |              98 |          0.331662 |              83 |          0.34641  |              93 |          0.374166 |       0.350746 |
|   84 | Iris-versicolor |            6   |           2.7 |            5.1 |           1.6 |             134 |          0.331662 |             143 |          0.360555 |             102 |          0.360555 |       0.350924 |
|  137 | Iris-virginica  |            6.3 |           3.4 |            5.6 |           2.4 |             149 |          0.244949 |             116 |          0.387298 |             101 |          0.424264 |       0.35217  |
|   57 | Iris-versicolor |            6.3 |           3.3 |            4.7 |           1.6 |              52 |          0.264575 |              86 |          0.374166 |              92 |          0.424264 |       0.354335 |
|  134 | Iris-virginica  |            6.3 |           2.8 |            5.1 |           1.5 |              84 |          0.331662 |              73 |          0.360555 |             124 |          0.374166 |       0.355461 |
|   33 | Iris-setosa     |            5.2 |           4.1 |            1.5 |           0.1 |              34 |          0.34641  |              47 |          0.34641  |              20 |          0.374166 |       0.355662 |
|  142 | Iris-virginica  |            6.9 |           3.1 |            5.1 |           2.3 |             146 |          0.244949 |             140 |          0.360555 |             113 |          0.469042 |       0.358182 |
|   25 | Iris-setosa     |            4.8 |           3.4 |            1.9 |           0.2 |              12 |          0.3      |              30 |          0.374166 |              27 |          0.412311 |       0.362159 |
|   85 | Iris-versicolor |            5.4 |           3   |            4.5 |           1.5 |              67 |          0.2      |              56 |          0.412311 |              97 |          0.479583 |       0.363965 |
|   17 | Iris-setosa     |            5.4 |           3.9 |            1.3 |           0.4 |              11 |          0.34641  |              49 |          0.360555 |              34 |          0.387298 |       0.364755 |
|   34 | Iris-setosa     |            5.5 |           4.2 |            1.4 |           0.2 |              33 |          0.34641  |              16 |          0.360555 |              17 |          0.387298 |       0.364755 |
|  112 | Iris-virginica  |            6.4 |           2.7 |            5.3 |           1.9 |             148 |          0.34641  |             129 |          0.374166 |             147 |          0.374166 |       0.364914 |
|  149 | Iris-virginica  |            6.2 |           3.4 |            5.4 |           2.3 |             137 |          0.244949 |             116 |          0.3      |             111 |          0.556776 |       0.367242 |
|   78 | Iris-versicolor |            6.7 |           3   |            5   |           1.7 |              53 |          0.316228 |              87 |          0.374166 |             148 |          0.412311 |       0.367568 |
|   73 | Iris-versicolor |            6.3 |           2.5 |            4.9 |           1.5 |             134 |          0.360555 |             124 |          0.360555 |             147 |          0.412311 |       0.377807 |
|   45 | Iris-setosa     |            5.1 |           3.8 |            1.9 |           0.4 |              47 |          0.360555 |               6 |          0.374166 |              22 |          0.412311 |       0.382344 |
|  126 | Iris-virginica  |            7.2 |           3.2 |            6   |           1.8 |             130 |          0.34641  |             103 |          0.387298 |             108 |          0.43589  |       0.389866 |
|   19 | Iris-setosa     |            5.7 |           3.8 |            1.7 |           0.3 |               6 |          0.331662 |              11 |          0.387298 |              49 |          0.469042 |       0.396001 |
|  131 | Iris-virginica  |            7.4 |           2.8 |            6.1 |           1.9 |             108 |          0.264575 |             103 |          0.458258 |             126 |          0.469042 |       0.397291 |
|  103 | Iris-virginica  |            7.1 |           3   |            5.9 |           2.1 |             126 |          0.387298 |             121 |          0.4      |             144 |          0.412311 |       0.39987  |
|   80 | Iris-versicolor |            5.7 |           2.6 |            3.5 |           1   |              82 |          0.34641  |              81 |          0.424264 |              70 |          0.43589  |       0.402188 |
|  108 | Iris-virginica  |            7.3 |           2.9 |            6.3 |           1.8 |             131 |          0.264575 |             126 |          0.43589  |             106 |          0.52915  |       0.409872 |
|   86 | Iris-versicolor |            6   |           3.4 |            4.5 |           1.6 |              57 |          0.374166 |              71 |          0.424264 |              52 |          0.458258 |       0.418896 |
|  123 | Iris-virginica  |            7.7 |           2.8 |            6.7 |           2   |             106 |          0.264575 |             119 |          0.412311 |             108 |          0.608276 |       0.428387 |
|   69 | Iris-versicolor |            6.2 |           2.2 |            4.5 |           1.5 |              88 |          0.264575 |              73 |          0.509902 |             120 |          0.538516 |       0.437665 |
|  106 | Iris-virginica  |            7.6 |           3   |            6.6 |           2.1 |             123 |          0.264575 |             108 |          0.52915  |             136 |          0.547723 |       0.447149 |
|  130 | Iris-virginica  |            7.2 |           3   |            5.8 |           1.6 |             126 |          0.34641  |             131 |          0.509902 |             103 |          0.519615 |       0.458642 |
|   65 | Iris-versicolor |            5.6 |           2.9 |            3.6 |           1.3 |              83 |          0.424264 |              80 |          0.447214 |              89 |          0.509902 |       0.46046  |
|   60 | Iris-versicolor |            5.2 |           2.7 |            3.9 |           1.4 |              90 |          0.387298 |              95 |          0.509902 |              54 |          0.519615 |       0.472272 |
|   15 | Iris-setosa     |            5.8 |           4   |            1.2 |           0.2 |              34 |          0.412311 |              17 |          0.469042 |              16 |          0.547723 |       0.476358 |
|   88 | Iris-versicolor |            6.3 |           2.3 |            4.4 |           1.3 |              69 |          0.264575 |              73 |          0.574456 |              63 |          0.591608 |       0.47688  |
|  101 | Iris-virginica  |            6.3 |           3.3 |            6   |           2.5 |             137 |          0.424264 |             145 |          0.5      |             105 |          0.509902 |       0.478055 |
|   23 | Iris-setosa     |            4.6 |           3.6 |            1   |           0.2 |               7 |          0.458258 |               3 |          0.509902 |              41 |          0.519615 |       0.495925 |
|   61 | Iris-versicolor |            5   |           2   |            3.5 |           1   |              94 |          0.360555 |              58 |          0.458258 |              82 |          0.67082  |       0.496544 |
|  120 | Iris-virginica  |            6   |           2.2 |            5   |           1.5 |              73 |          0.43589  |              84 |          0.519615 |              69 |          0.538516 |       0.498007 |
|   99 | Iris-versicolor |            5.1 |           2.5 |            3   |           1.1 |              58 |          0.387298 |              94 |          0.387298 |              61 |          0.72111  |       0.498569 |
|  115 | Iris-virginica  |            5.8 |           2.8 |            5.1 |           2.4 |             122 |          0.489898 |             102 |          0.509902 |             143 |          0.509902 |       0.503234 |
|   16 | Iris-setosa     |            5.7 |           4.4 |            1.5 |           0.4 |              34 |          0.360555 |              15 |          0.547723 |               6 |          0.616441 |       0.50824  |
|   63 | Iris-versicolor |            6   |           2.2 |            4   |           1   |              93 |          0.489898 |              70 |          0.519615 |              68 |          0.547723 |       0.519079 |
|  135 | Iris-virginica  |            6.1 |           2.6 |            5.6 |           1.4 |             104 |          0.538516 |              84 |          0.556776 |             134 |          0.583095 |       0.559463 |
|  136 | Iris-virginica  |            7.7 |           3   |            6.1 |           2.3 |             131 |          0.538516 |             106 |          0.547723 |             103 |          0.663325 |       0.583188 |
|  109 | Iris-virginica  |            6.7 |           2.5 |            5.8 |           1.8 |             129 |          0.556776 |             104 |          0.6      |             117 |          0.616441 |       0.591073 |
|  119 | Iris-virginica  |            7.7 |           2.6 |            6.9 |           2.3 |             123 |          0.412311 |             106 |          0.547723 |             136 |          0.894427 |       0.618153 |
|  110 | Iris-virginica  |            7.2 |           3.6 |            6.1 |           2.5 |             144 |          0.632456 |             121 |          0.67082  |             145 |          0.707107 |       0.670128 |
|  118 | Iris-virginica  |            7.7 |           3.8 |            6.7 |           2.2 |             132 |          0.412311 |             106 |          0.818535 |             110 |          0.860233 |       0.697026 |
|   42 | Iris-setosa     |            4.5 |           2.3 |            1.3 |           0.3 |               9 |          0.6245   |              39 |          0.714143 |              46 |          0.768115 |       0.702252 |
|  132 | Iris-virginica  |            7.9 |           3.8 |            6.4 |           2   |             118 |          0.412311 |             106 |          0.883176 |             136 |          0.927362 |       0.740949 |
|  107 | Iris-virginica  |            4.9 |           2.5 |            4.5 |           1.7 |              85 |          0.734847 |              60 |          0.761577 |              91 |          0.793725 |       0.763383 |
|    1 | Iris-setosa     |           20.1 |          30.5 |           80.4 |          70   |             118 |        104.38     |             119 |        104.488    |             132 |        104.698    |     104.522    |
+------+-----------------+----------------+---------------+----------------+---------------+-----------------+-------------------+-----------------+-------------------+-----------------+-------------------+----------------+
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="4">
<li><p>Menentukan Outlier</p></li>
</ol>
<ul class="simple">
<li><p>Gunakan threshold berdasarkan nilai rata-rata distance dari semua titik.</p></li>
<li><p>Outlier adalah data yang memiliki rata-rata jarak lebih besar dari threshold tertentu (misalnya di atas Q3 + 1.5 * IQR dalam boxplot).</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pymysql</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tabulate</span><span class="w"> </span><span class="kn">import</span> <span class="n">tabulate</span>

<span class="c1"># Fungsi untuk menghitung Euclidean Distance</span>
<span class="k">def</span><span class="w"> </span><span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>
        <span class="p">(</span><span class="n">row1</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row2</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span>
    <span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Koneksi ke PostgreSQL</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">PG_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">PG_PORT</span><span class="p">,</span> <span class="n">dbname</span><span class="o">=</span><span class="n">PG_NAME</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="n">PG_USER</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">PG_PASS</span><span class="p">,</span> <span class="n">sslmode</span><span class="o">=</span><span class="s2">&quot;require&quot;</span>
    <span class="p">)</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari PostgreSQL</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sepal;&quot;</span><span class="p">)</span>
    <span class="n">pg_rows</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">pg_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cur</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">pg_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pg_rows</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">pg_columns</span><span class="p">)</span>

    <span class="c1"># Koneksi ke MySQL</span>
    <span class="n">mysql_conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">DB_HOST</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">DB_PORT</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">DB_USER</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">DB_PASS</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">DB_NAME</span><span class="p">,</span>
        <span class="n">cursorclass</span><span class="o">=</span><span class="n">pymysql</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span>
    <span class="p">)</span>
    <span class="n">mysql_cur</span> <span class="o">=</span> <span class="n">mysql_conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Ambil data dari MySQL</span>
    <span class="n">mysql_cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM petal ORDER BY id ASC;&quot;</span><span class="p">)</span>
    <span class="n">mysql_rows</span> <span class="o">=</span> <span class="n">mysql_cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">mysql_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mysql_rows</span><span class="p">)</span>

    <span class="c1"># Menggabungkan kedua tabel berdasarkan ID</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pg_df</span><span class="p">,</span> <span class="n">mysql_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

    <span class="c1"># Mengatur urutan kolom agar class berada di sebelah ID</span>
    <span class="n">ordered_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">]</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="p">[</span><span class="n">ordered_columns</span><span class="p">]</span>

    <span class="c1"># Menyimpan hasil tetangga terdekat</span>
    <span class="n">avg_distances</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Menentukan tetangga terdekat untuk setiap data</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="c1"># Buat DataFrame baru untuk perhitungan jarak</span>
        <span class="n">temp_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">temp_df</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">euclidean_distance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">row</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Urutkan berdasarkan jarak dan ambil 3 tetangga terdekat (hindari diri sendiri)</span>
        <span class="n">neighbors</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;distance&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>  <span class="c1"># Skip indeks pertama karena itu dirinya sendiri</span>

        <span class="c1"># Hitung rata-rata distance</span>
        <span class="n">avg_distance</span> <span class="o">=</span> <span class="p">(</span><span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">neighbors</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;distance&quot;</span><span class="p">])</span> <span class="o">/</span> <span class="mi">3</span>
        <span class="n">avg_distances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">avg_distance</span><span class="p">)</span>

    <span class="c1"># Tambahkan kolom rata-rata jarak ke dataframe utama</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;avg_distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">avg_distances</span>

    <span class="c1"># 🔥 Mendeteksi Outlier berdasarkan IQR</span>
    <span class="n">Q1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;avg_distance&quot;</span><span class="p">],</span> <span class="mi">25</span><span class="p">)</span>  <span class="c1"># Kuartil 1 (Q1)</span>
    <span class="n">Q3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;avg_distance&quot;</span><span class="p">],</span> <span class="mi">75</span><span class="p">)</span>  <span class="c1"># Kuartil 3 (Q3)</span>
    <span class="n">IQR</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">-</span> <span class="n">Q1</span>  <span class="c1"># Interquartile Range (IQR)</span>
    <span class="n">threshold</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>  <span class="c1"># Batas outlier</span>

    <span class="c1"># Buat kolom baru untuk menandai outlier (True/False)</span>
    <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;avg_distance&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">threshold</span>

    <span class="c1"># 🔥 Hapus kolom tetangga agar tabel lebih bersih</span>
    <span class="n">combined_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;neighbor_1_id&quot;</span><span class="p">,</span> <span class="s2">&quot;neighbor_2_id&quot;</span><span class="p">,</span> <span class="s2">&quot;neighbor_3_id&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># 🔥 Urutkan berdasarkan rata-rata jarak ke tetangga terdekat</span>
    <span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;avg_distance&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Menampilkan hasil dalam format tabel</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tabulate</span><span class="p">(</span><span class="n">combined_df</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="s2">&quot;keys&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;psql&quot;</span><span class="p">,</span> <span class="n">showindex</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># Menutup koneksi database</span>
    <span class="k">if</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">conn</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mysql_cur</span><span class="p">:</span>
        <span class="n">mysql_cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mysql_conn</span><span class="p">:</span>
        <span class="n">mysql_conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>+------+-----------------+----------------+---------------+----------------+---------------+----------------+-----------+
|   id | class           |   sepal_length |   sepal_width |   petal_length |   petal_width |   avg_distance | outlier   |
|------+-----------------+----------------+---------------+----------------+---------------+----------------+-----------|
|   10 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |       0.057735 | False     |
|   35 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |       0.057735 | False     |
|   38 | Iris-setosa     |            4.9 |           3.1 |            1.5 |           0.1 |       0.057735 | False     |
|   40 | Iris-setosa     |            5.1 |           3.4 |            1.5 |           0.2 |       0.127614 | False     |
|    8 | Iris-setosa     |            5   |           3.4 |            1.5 |           0.2 |       0.14714  | False     |
|   29 | Iris-setosa     |            5.2 |           3.4 |            1.4 |           0.2 |       0.152016 | False     |
|    2 | Iris-setosa     |            4.9 |           3   |            1.4 |           0.2 |       0.152016 | False     |
|   28 | Iris-setosa     |            5.2 |           3.5 |            1.5 |           0.2 |       0.152016 | False     |
|   97 | Iris-versicolor |            5.7 |           2.9 |            4.2 |           1.3 |       0.152016 | False     |
|   18 | Iris-setosa     |            5.1 |           3.5 |            1.4 |           0.3 |       0.162611 | False     |
|   31 | Iris-setosa     |            4.8 |           3.1 |            1.6 |           0.2 |       0.162611 | False     |
|   13 | Iris-setosa     |            4.8 |           3   |            1.4 |           0.1 |       0.162611 | False     |
|   48 | Iris-setosa     |            4.6 |           3.2 |            1.4 |           0.2 |       0.168817 | False     |
|   20 | Iris-setosa     |            5.1 |           3.8 |            1.5 |           0.3 |       0.175931 | False     |
|   50 | Iris-setosa     |            5   |           3.3 |            1.4 |           0.2 |       0.179411 | False     |
|   30 | Iris-setosa     |            4.7 |           3.2 |            1.6 |           0.2 |       0.179411 | False     |
|    4 | Iris-setosa     |            4.6 |           3.1 |            1.5 |           0.2 |       0.179411 | False     |
|  100 | Iris-versicolor |            5.7 |           2.8 |            4.1 |           1.3 |       0.179411 | False     |
|   41 | Iris-setosa     |            5   |           3.5 |            1.3 |           0.3 |       0.186525 | False     |
|   96 | Iris-versicolor |            5.7 |           3   |            4.2 |           1.2 |       0.186525 | False     |
|   49 | Iris-setosa     |            5.3 |           3.7 |            1.5 |           0.2 |       0.189519 | False     |
|    5 | Iris-setosa     |            5   |           3.6 |            1.4 |           0.2 |       0.190006 | False     |
|   89 | Iris-versicolor |            5.6 |           3   |            4.1 |           1.3 |       0.190006 | False     |
|  102 | Iris-virginica  |            5.8 |           2.7 |            5.1 |           1.9 |       0.193601 | False     |
|  143 | Iris-virginica  |            5.8 |           2.7 |            5.1 |           1.9 |       0.193601 | False     |
|   39 | Iris-setosa     |            4.4 |           3   |            1.3 |           0.2 |       0.195457 | False     |
|   46 | Iris-setosa     |            4.8 |           3   |            1.4 |           0.3 |       0.195457 | False     |
|   26 | Iris-setosa     |            5   |           3   |            1.6 |           0.2 |       0.2      | False     |
|   64 | Iris-versicolor |            6.1 |           2.9 |            4.7 |           1.4 |       0.203326 | False     |
|   81 | Iris-versicolor |            5.5 |           2.4 |            3.8 |           1.1 |       0.204875 | False     |
|   22 | Iris-setosa     |            5.1 |           3.7 |            1.5 |           0.4 |       0.21044  | False     |
|   47 | Iris-setosa     |            5.1 |           3.8 |            1.6 |           0.2 |       0.21044  | False     |
|   92 | Iris-versicolor |            6.1 |           3   |            4.6 |           1.4 |       0.213807 | False     |
|   27 | Iris-setosa     |            5   |           3.4 |            1.6 |           0.4 |       0.215738 | False     |
|  139 | Iris-virginica  |            6   |           3   |            4.8 |           1.8 |       0.215957 | False     |
|   76 | Iris-versicolor |            6.6 |           3   |            4.4 |           1.4 |       0.216982 | False     |
|   93 | Iris-versicolor |            5.8 |           2.6 |            4   |           1.2 |       0.216982 | False     |
|    3 | Iris-setosa     |            4.7 |           3.2 |            1.3 |           0.2 |       0.216982 | False     |
|   95 | Iris-versicolor |            5.6 |           2.7 |            4.2 |           1.3 |       0.220462 | False     |
|  128 | Iris-virginica  |            6.1 |           3   |            4.9 |           1.8 |       0.223071 | False     |
|   70 | Iris-versicolor |            5.6 |           2.5 |            3.9 |           1.1 |       0.227576 | False     |
|   11 | Iris-setosa     |            5.4 |           3.7 |            1.5 |           0.2 |       0.227614 | False     |
|   83 | Iris-versicolor |            5.8 |           2.7 |            3.9 |           1.2 |       0.229613 | False     |
|  127 | Iris-virginica  |            6.2 |           2.8 |            4.8 |           1.8 |       0.233666 | False     |
|   43 | Iris-setosa     |            4.4 |           3.2 |            1.3 |           0.2 |       0.241202 | False     |
|   12 | Iris-setosa     |            4.8 |           3.4 |            1.6 |           0.2 |       0.243352 | False     |
|   90 | Iris-versicolor |            5.5 |           2.5 |            4   |           1.3 |       0.248316 | False     |
|  117 | Iris-virginica  |            6.5 |           3   |            5.5 |           1.8 |       0.248975 | False     |
|  129 | Iris-virginica  |            6.4 |           2.8 |            5.6 |           2.1 |       0.249297 | False     |
|   82 | Iris-versicolor |            5.5 |           2.4 |            3.7 |           1   |       0.250802 | False     |
|    9 | Iris-setosa     |            4.4 |           2.9 |            1.4 |           0.2 |       0.25255  | False     |
|  138 | Iris-virginica  |            6.4 |           3.1 |            5.5 |           1.8 |       0.25789  | False     |
|   66 | Iris-versicolor |            6.7 |           3.1 |            4.4 |           1.4 |       0.257959 | False     |
|   79 | Iris-versicolor |            6   |           2.9 |            4.5 |           1.5 |       0.25887  | False     |
|  124 | Iris-virginica  |            6.3 |           2.7 |            4.9 |           1.8 |       0.25957  | False     |
|    7 | Iris-setosa     |            4.6 |           3.4 |            1.4 |           0.3 |       0.262727 | False     |
|  121 | Iris-virginica  |            6.9 |           3.2 |            5.7 |           2.3 |       0.262727 | False     |
|   44 | Iris-setosa     |            5   |           3.5 |            1.6 |           0.6 |       0.268137 | False     |
|   59 | Iris-versicolor |            6.6 |           2.9 |            4.6 |           1.3 |       0.268709 | False     |
|   54 | Iris-versicolor |            5.5 |           2.3 |            4   |           1.3 |       0.272076 | False     |
|  104 | Iris-virginica  |            6.3 |           2.9 |            5.6 |           1.8 |       0.273853 | False     |
|  133 | Iris-virginica  |            6.4 |           2.8 |            5.6 |           2.2 |       0.274755 | False     |
|   75 | Iris-versicolor |            6.4 |           2.9 |            4.3 |           1.3 |       0.275043 | False     |
|   24 | Iris-setosa     |            5.1 |           3.3 |            1.7 |           0.5 |       0.27958  | False     |
|   36 | Iris-setosa     |            5   |           3.2 |            1.2 |           0.2 |       0.279945 | False     |
|  141 | Iris-virginica  |            6.7 |           3.1 |            5.6 |           2.4 |       0.285311 | False     |
|  144 | Iris-virginica  |            6.8 |           3.2 |            5.9 |           2.3 |       0.285354 | False     |
|   68 | Iris-versicolor |            5.8 |           2.7 |            4.1 |           1   |       0.286485 | False     |
|  114 | Iris-virginica  |            5.7 |           2.5 |            5   |           2   |       0.286938 | False     |
|  145 | Iris-virginica  |            6.7 |           3.3 |            5.7 |           2.5 |       0.287059 | False     |
|   53 | Iris-versicolor |            6.9 |           3.1 |            4.9 |           1.5 |       0.287882 | False     |
|   98 | Iris-versicolor |            6.2 |           2.9 |            4.3 |           1.3 |       0.292691 | False     |
|  113 | Iris-virginica  |            6.8 |           3   |            5.5 |           2.1 |       0.29339  | False     |
|   32 | Iris-setosa     |            5.4 |           3.4 |            1.5 |           0.4 |       0.294281 | False     |
|   71 | Iris-versicolor |            5.9 |           3.2 |            4.8 |           1.8 |       0.294721 | False     |
|   67 | Iris-versicolor |            5.6 |           3   |            4.5 |           1.5 |       0.295766 | False     |
|   94 | Iris-versicolor |            5   |           2.3 |            3.3 |           1   |       0.296425 | False     |
|  140 | Iris-virginica  |            6.9 |           3.1 |            5.4 |           2.1 |       0.298105 | False     |
|   14 | Iris-setosa     |            4.3 |           3   |            1.1 |           0.1 |       0.302529 | False     |
|   74 | Iris-versicolor |            6.1 |           2.8 |            4.7 |           1.2 |       0.303635 | False     |
|   87 | Iris-versicolor |            6.7 |           3.1 |            4.7 |           1.5 |       0.305099 | False     |
|   52 | Iris-versicolor |            6.4 |           3.2 |            4.5 |           1.5 |       0.309071 | False     |
|  148 | Iris-virginica  |            6.5 |           3   |            5.2 |           2   |       0.310191 | False     |
|  150 | Iris-virginica  |            5.9 |           3   |            5.1 |           1.8 |       0.310244 | False     |
|   56 | Iris-versicolor |            5.7 |           2.8 |            4.5 |           1.3 |       0.310819 | False     |
|   55 | Iris-versicolor |            6.5 |           2.8 |            4.6 |           1.5 |       0.311781 | False     |
|   21 | Iris-setosa     |            5.4 |           3.4 |            1.7 |           0.2 |       0.314466 | False     |
|   37 | Iris-setosa     |            5.5 |           3.5 |            1.3 |           0.2 |       0.315963 | False     |
|  122 | Iris-virginica  |            5.6 |           2.8 |            4.9 |           2   |       0.321373 | False     |
|  146 | Iris-virginica  |            6.7 |           3   |            5.2 |           2.3 |       0.32202  | False     |
|  105 | Iris-virginica  |            6.5 |           3   |            5.8 |           2.2 |       0.325594 | False     |
|   58 | Iris-versicolor |            4.9 |           2.4 |            3.3 |           1   |       0.328992 | False     |
|  125 | Iris-virginica  |            6.7 |           3.3 |            5.7 |           2.1 |       0.330131 | False     |
|   62 | Iris-versicolor |            5.9 |           3   |            4.2 |           1.5 |       0.330739 | False     |
|   91 | Iris-versicolor |            5.5 |           2.6 |            4.4 |           1.2 |       0.335022 | False     |
|  147 | Iris-virginica  |            6.3 |           2.5 |            5   |           1.9 |       0.335471 | False     |
|   77 | Iris-versicolor |            6.8 |           2.8 |            4.8 |           1.4 |       0.336349 | False     |
|  111 | Iris-virginica  |            6.5 |           3.2 |            5.1 |           2   |       0.340679 | False     |
|   51 | Iris-versicolor |            7   |           3.2 |            4.7 |           1.4 |       0.344043 | False     |
|    6 | Iris-setosa     |            5.4 |           3.9 |            1.7 |           0.4 |       0.346209 | False     |
|  116 | Iris-virginica  |            6.4 |           3.2 |            5.3 |           2.3 |       0.349444 | False     |
|   72 | Iris-versicolor |            6.1 |           2.8 |            4   |           1.3 |       0.350746 | False     |
|   84 | Iris-versicolor |            6   |           2.7 |            5.1 |           1.6 |       0.350924 | False     |
|  137 | Iris-virginica  |            6.3 |           3.4 |            5.6 |           2.4 |       0.35217  | False     |
|   57 | Iris-versicolor |            6.3 |           3.3 |            4.7 |           1.6 |       0.354335 | False     |
|  134 | Iris-virginica  |            6.3 |           2.8 |            5.1 |           1.5 |       0.355461 | False     |
|   33 | Iris-setosa     |            5.2 |           4.1 |            1.5 |           0.1 |       0.355662 | False     |
|  142 | Iris-virginica  |            6.9 |           3.1 |            5.1 |           2.3 |       0.358182 | False     |
|   25 | Iris-setosa     |            4.8 |           3.4 |            1.9 |           0.2 |       0.362159 | False     |
|   85 | Iris-versicolor |            5.4 |           3   |            4.5 |           1.5 |       0.363965 | False     |
|   17 | Iris-setosa     |            5.4 |           3.9 |            1.3 |           0.4 |       0.364755 | False     |
|   34 | Iris-setosa     |            5.5 |           4.2 |            1.4 |           0.2 |       0.364755 | False     |
|  112 | Iris-virginica  |            6.4 |           2.7 |            5.3 |           1.9 |       0.364914 | False     |
|  149 | Iris-virginica  |            6.2 |           3.4 |            5.4 |           2.3 |       0.367242 | False     |
|   78 | Iris-versicolor |            6.7 |           3   |            5   |           1.7 |       0.367568 | False     |
|   73 | Iris-versicolor |            6.3 |           2.5 |            4.9 |           1.5 |       0.377807 | False     |
|   45 | Iris-setosa     |            5.1 |           3.8 |            1.9 |           0.4 |       0.382344 | False     |
|  126 | Iris-virginica  |            7.2 |           3.2 |            6   |           1.8 |       0.389866 | False     |
|   19 | Iris-setosa     |            5.7 |           3.8 |            1.7 |           0.3 |       0.396001 | False     |
|  131 | Iris-virginica  |            7.4 |           2.8 |            6.1 |           1.9 |       0.397291 | False     |
|  103 | Iris-virginica  |            7.1 |           3   |            5.9 |           2.1 |       0.39987  | False     |
|   80 | Iris-versicolor |            5.7 |           2.6 |            3.5 |           1   |       0.402188 | False     |
|  108 | Iris-virginica  |            7.3 |           2.9 |            6.3 |           1.8 |       0.409872 | False     |
|   86 | Iris-versicolor |            6   |           3.4 |            4.5 |           1.6 |       0.418896 | False     |
|  123 | Iris-virginica  |            7.7 |           2.8 |            6.7 |           2   |       0.428387 | False     |
|   69 | Iris-versicolor |            6.2 |           2.2 |            4.5 |           1.5 |       0.437665 | False     |
|  106 | Iris-virginica  |            7.6 |           3   |            6.6 |           2.1 |       0.447149 | False     |
|  130 | Iris-virginica  |            7.2 |           3   |            5.8 |           1.6 |       0.458642 | False     |
|   65 | Iris-versicolor |            5.6 |           2.9 |            3.6 |           1.3 |       0.46046  | False     |
|   60 | Iris-versicolor |            5.2 |           2.7 |            3.9 |           1.4 |       0.472272 | False     |
|   15 | Iris-setosa     |            5.8 |           4   |            1.2 |           0.2 |       0.476358 | False     |
|   88 | Iris-versicolor |            6.3 |           2.3 |            4.4 |           1.3 |       0.47688  | False     |
|  101 | Iris-virginica  |            6.3 |           3.3 |            6   |           2.5 |       0.478055 | False     |
|   23 | Iris-setosa     |            4.6 |           3.6 |            1   |           0.2 |       0.495925 | False     |
|   61 | Iris-versicolor |            5   |           2   |            3.5 |           1   |       0.496544 | False     |
|  120 | Iris-virginica  |            6   |           2.2 |            5   |           1.5 |       0.498007 | False     |
|   99 | Iris-versicolor |            5.1 |           2.5 |            3   |           1.1 |       0.498569 | False     |
|  115 | Iris-virginica  |            5.8 |           2.8 |            5.1 |           2.4 |       0.503234 | False     |
|   16 | Iris-setosa     |            5.7 |           4.4 |            1.5 |           0.4 |       0.50824  | False     |
|   63 | Iris-versicolor |            6   |           2.2 |            4   |           1   |       0.519079 | False     |
|  135 | Iris-virginica  |            6.1 |           2.6 |            5.6 |           1.4 |       0.559463 | False     |
|  136 | Iris-virginica  |            7.7 |           3   |            6.1 |           2.3 |       0.583188 | False     |
|  109 | Iris-virginica  |            6.7 |           2.5 |            5.8 |           1.8 |       0.591073 | True      |
|  119 | Iris-virginica  |            7.7 |           2.6 |            6.9 |           2.3 |       0.618153 | True      |
|  110 | Iris-virginica  |            7.2 |           3.6 |            6.1 |           2.5 |       0.670128 | True      |
|  118 | Iris-virginica  |            7.7 |           3.8 |            6.7 |           2.2 |       0.697026 | True      |
|   42 | Iris-setosa     |            4.5 |           2.3 |            1.3 |           0.3 |       0.702252 | True      |
|  132 | Iris-virginica  |            7.9 |           3.8 |            6.4 |           2   |       0.740949 | True      |
|  107 | Iris-virginica  |            4.9 |           2.5 |            4.5 |           1.7 |       0.763383 | True      |
|    1 | Iris-setosa     |           20.1 |          30.5 |           80.4 |          70   |     104.522    | True      |
+------+-----------------+----------------+---------------+----------------+---------------+----------------+-----------+
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.neighbors</span><span class="w"> </span><span class="kn">import</span> <span class="n">LocalOutlierFactor</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">LocalOutlierFactor</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">contamination</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">combined_df</span><span class="p">[[</span><span class="s1">&#39;petal_length&#39;</span><span class="p">,</span> <span class="s1">&#39;petal_width&#39;</span><span class="p">,</span> <span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span> <span class="s1">&#39;sepal_width&#39;</span><span class="p">]])</span>

<span class="c1"># Instead of comparing against ground_truth (which has different size),</span>
<span class="c1"># evaluate using the model&#39;s inbuilt outlier prediction</span>
<span class="n">outlier_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">y_pred</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Outlier are labeled -1 by LOF</span>

<span class="c1"># Print outliers</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Data yang diduga outlier (menggunakan LocalOutlierFactor):&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">combined_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">outlier_index</span><span class="p">])</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Data yang diduga outlier (menggunakan LocalOutlierFactor):
      id            class  sepal_length  sepal_width  petal_length  \
73    32      Iris-setosa           5.4          3.4           1.5   
86    21      Iris-setosa           5.4          3.4           1.7   
108   25      Iris-setosa           4.8          3.4           1.9   
116   45      Iris-setosa           5.1          3.8           1.9   
128   65  Iris-versicolor           5.6          2.9           3.6   
129   60  Iris-versicolor           5.2          2.7           3.9   
133   23      Iris-setosa           4.6          3.6           1.0   
137  115   Iris-virginica           5.8          2.8           5.1   
139   63  Iris-versicolor           6.0          2.2           4.0   
140  135   Iris-virginica           6.1          2.6           5.6   
142  109   Iris-virginica           6.7          2.5           5.8   
144  110   Iris-virginica           7.2          3.6           6.1   
146   42      Iris-setosa           4.5          2.3           1.3   
148  107   Iris-virginica           4.9          2.5           4.5   
149    1      Iris-setosa          20.1         30.5          80.4   

     petal_width  avg_distance  outlier  
73           0.4      0.294281    False  
86           0.2      0.314466    False  
108          0.2      0.362159    False  
116          0.4      0.382344    False  
128          1.3      0.460460    False  
129          1.4      0.472272    False  
133          0.2      0.495925    False  
137          2.4      0.503234    False  
139          1.0      0.519079    False  
140          1.4      0.559463    False  
142          1.8      0.591073     True  
144          2.5      0.670128     True  
146          0.3      0.702252     True  
148          1.7      0.763383     True  
149         70.0    104.522035     True  
[ 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
  1 -1  1  1  1  1  1  1  1  1  1  1  1  1 -1  1  1  1  1  1  1  1  1  1
  1  1  1  1  1  1  1  1  1  1  1  1 -1  1  1  1  1  1  1  1 -1  1  1  1
  1  1  1  1  1  1  1  1 -1 -1  1  1  1 -1  1  1  1 -1  1 -1 -1  1 -1  1
 -1  1 -1  1 -1 -1]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.neighbors</span><span class="w"> </span><span class="kn">import</span> <span class="n">LocalOutlierFactor</span>

<span class="c1"># Normalisasi nama kolom agar seragam</span>
<span class="n">combined_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

<span class="c1"># Pastikan hanya kolom numerik yang digunakan</span>
<span class="n">numeric_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">]</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">combined_df</span><span class="p">[</span><span class="n">numeric_cols</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

<span class="c1"># Inisialisasi model LOF</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">LocalOutlierFactor</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">contamination</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>  <span class="c1"># Prediksi outlier (-1) atau inlier (1)</span>

<span class="c1"># Tambahkan hasil prediksi ke DataFrame dengan nilai 1 atau -1</span>
<span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_pred</span>

<span class="c1"># Urutkan berdasarkan ID</span>
<span class="n">combined_df</span> <span class="o">=</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Buat tabel hasil prediksi dengan indeksnya</span>
<span class="n">hasil_prediksi_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="n">combined_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
    <span class="s2">&quot;outlier&quot;</span><span class="p">:</span> <span class="n">combined_df</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span>  <span class="c1"># Menampilkan -1 (outlier) atau 1 (inlier)</span>
<span class="p">})</span>

<span class="c1"># Buat tabel khusus outlier (-1)</span>
<span class="n">outlier_df</span> <span class="o">=</span> <span class="n">hasil_prediksi_df</span><span class="p">[</span><span class="n">hasil_prediksi_df</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># Cetak hasil tabel prediksi</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🔹 Tabel Hasil Prediksi LOF:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">hasil_prediksi_df</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>  <span class="c1"># Menampilkan semua data</span>

<span class="c1"># Cetak tabel khusus outlier</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🔹 Tabel Data Outlier:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">outlier_df</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>  <span class="c1"># Menampilkan hanya outlier (-1)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>🔹 Tabel Hasil Prediksi LOF:
 index  id  outlier
     0   1       -1
     1   2        1
     2   3        1
     3   4        1
     4   5        1
     5   6        1
     6   7        1
     7   8        1
     8   9        1
     9  10        1
    10  11        1
    11  12        1
    12  13        1
    13  14        1
    14  15       -1
    15  16       -1
    16  17        1
    17  18        1
    18  19        1
    19  20        1
    20  21        1
    21  22        1
    22  23        1
    23  24        1
    24  25        1
    25  26        1
    26  27        1
    27  28        1
    28  29        1
    29  30        1
    30  31        1
    31  32        1
    32  33        1
    33  34       -1
    34  35        1
    35  36        1
    36  37        1
    37  38        1
    38  39        1
    39  40        1
    40  41        1
    41  42       -1
    42  43        1
    43  44        1
    44  45        1
    45  46        1
    46  47        1
    47  48        1
    48  49        1
    49  50        1
    50  51        1
    51  52        1
    52  53        1
    53  54        1
    54  55        1
    55  56        1
    56  57        1
    57  58       -1
    58  59        1
    59  60        1
    60  61       -1
    61  62        1
    62  63        1
    63  64        1
    64  65        1
    65  66        1
    66  67        1
    67  68        1
    68  69        1
    69  70        1
    70  71        1
    71  72        1
    72  73        1
    73  74        1
    74  75        1
    75  76        1
    76  77        1
    77  78        1
    78  79        1
    79  80        1
    80  81        1
    81  82        1
    82  83        1
    83  84        1
    84  85        1
    85  86        1
    86  87        1
    87  88        1
    88  89        1
    89  90        1
    90  91        1
    91  92        1
    92  93        1
    93  94       -1
    94  95        1
    95  96        1
    96  97        1
    97  98        1
    98  99       -1
    99 100        1
   100 101        1
   101 102        1
   102 103        1
   103 104        1
   104 105        1
   105 106       -1
   106 107       -1
   107 108        1
   108 109        1
   109 110        1
   110 111        1
   111 112        1
   112 113        1
   113 114        1
   114 115        1
   115 116        1
   116 117        1
   117 118       -1
   118 119       -1
   119 120        1
   120 121        1
   121 122        1
   122 123       -1
   123 124        1
   124 125        1
   125 126        1
   126 127        1
   127 128        1
   128 129        1
   129 130        1
   130 131        1
   131 132       -1
   132 133        1
   133 134        1
   134 135        1
   135 136        1
   136 137        1
   137 138        1
   138 139        1
   139 140        1
   140 141        1
   141 142        1
   142 143        1
   143 144        1
   144 145        1
   145 146        1
   146 147        1
   147 148        1
   148 149        1
   149 150        1

🔹 Tabel Data Outlier:
 index  id  outlier
     0   1       -1
    14  15       -1
    15  16       -1
    33  34       -1
    41  42       -1
    57  58       -1
    60  61       -1
    93  94       -1
    98  99       -1
   105 106       -1
   106 107       -1
   117 118       -1
   118 119       -1
   122 123       -1
   131 132       -1
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="pemdatD_DataUnderstanding_23_185.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Understanding Data</p>
      </div>
    </a>
    <a class="right-next"
       href="LOF.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Local Outlier Factor</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#meningkatkan-kualitas-data">Meningkatkan Kualitas Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#memastikan-akurasi-analisis-statistik-dan-model">Memastikan Akurasi Analisis Statistik dan Model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mendeteksi-kejadian-langka-atau-anomali">Mendeteksi Kejadian Langka atau Anomali</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#meningkatkan-keamanan-dan-deteksi-ancaman">Meningkatkan Keamanan dan Deteksi Ancaman</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optimasi-proses-bisnis-dan-operasional">Optimasi Proses Bisnis dan Operasional</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mendukung-pengambilan-keputusan-berbasis-data">Mendukung Pengambilan Keputusan Berbasis Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#validasi-asumsi-data">Validasi Asumsi Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tahapan-mendeteksi-outlier">Tahapan mendeteksi outlier</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pemahaman-data">Pemahaman data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksplorasi-data">Eksplorasi Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#visualisasi-data">Visualisasi Data:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identifikasi-oulier-menggunakan-metode-knn">Identifikasi Oulier menggunakan metode KNN</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cara-kerja-knn-dalam-deteksi-outlier">Cara kerja KNN dalam deteksi Outlier</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Rahmatul Layli
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>